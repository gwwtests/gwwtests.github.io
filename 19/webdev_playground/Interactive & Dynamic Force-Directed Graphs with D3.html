<!DOCTYPE html><html xmlns:cc="http://creativecommons.org/ns#"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# medium-com: http://ogp.me/ns/fb/medium-com#"><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=contain"><title>Interactive &amp; Dynamic Force-Directed Graphs with D3</title><link rel="canonical" href="https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811"><meta name="title" content="Interactive &amp; Dynamic Force-Directed Graphs with D3"><meta name="referrer" content="unsafe-url"><meta name="description" content="Many companies have a tremendous amount of data which is not just hard to maintain and manage, but also hard to understand and analyse. Here, data visualisation should find a remedy. The main goal is…"><meta name="theme-color" content="#000000"><meta property="og:title" content="Interactive &amp; Dynamic Force-Directed Graphs with D3"><meta property="twitter:title" content="Interactive &amp; Dynamic Force-Directed Graphs with D3"><meta property="og:url" content="https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811"><meta property="og:image" content="https://cdn-images-1.medium.com/max/1200/1*6RDl7zNmvg_4QSHVRrmYCw.png"><meta property="fb:app_id" content="542599432471018"><meta property="og:description" content="A guided tour through D3 4.0 force simulations"><meta name="twitter:description" content="A guided tour through D3 4.0 force simulations"><meta name="twitter:image:src" content="https://cdn-images-1.medium.com/max/1200/1*6RDl7zNmvg_4QSHVRrmYCw.png"><link rel="publisher" href="https://plus.google.com/103654360130207659246"><link rel="author" href="https://medium.com/@rofrischmann"><meta property="author" content="Robin Frischmann"><meta property="og:type" content="article"><meta name="twitter:card" content="summary_large_image"><meta property="article:publisher" content="https://www.facebook.com/medium"><meta property="article:author" content="https://medium.com/@rofrischmann"><meta name="robots" content="index, follow"><meta property="article:published_time" content="2017-02-13T08:26:40.912Z"><meta name="twitter:creator" content="@rofrischmann"><meta name="twitter:site" content="@Medium"><meta property="og:site_name" content="Medium"><meta name="twitter:label1" value="Reading time"><meta name="twitter:data1" value="12 min read"><meta name="twitter:app:name:iphone" content="Medium"><meta name="twitter:app:id:iphone" content="828256236"><meta name="twitter:app:url:iphone" content="medium://p/da720c6d7811"><meta property="al:ios:app_name" content="Medium"><meta property="al:ios:app_store_id" content="828256236"><meta property="al:android:package" content="com.medium.reader"><meta property="al:android:app_name" content="Medium"><meta property="al:ios:url" content="medium://p/da720c6d7811"><meta property="al:android:url" content="medium://p/da720c6d7811"><meta property="al:web:url" content="https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811"><link rel="search" type="application/opensearchdescription+xml" title="Medium" href="/osd.xml" /><link rel="alternate" href="android-app://com.medium.reader/https/medium.com/p/da720c6d7811" /><script type="application/ld+json">{"@context":"http://schema.org","@type":"NewsArticle","image":{"@type":"ImageObject","width":1920,"height":824,"url":"https://cdn-images-1.medium.com/max/1920/1*6RDl7zNmvg_4QSHVRrmYCw.png"},"url":"https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811","dateCreated":"2017-02-13T08:26:40.912Z","datePublished":"2017-02-13T08:26:40.912Z","dateModified":"2018-09-17T09:45:27.436Z","headline":"Interactive & Dynamic Force-Directed Graphs with D3","name":"Interactive & Dynamic Force-Directed Graphs with D3","articleId":"da720c6d7811","thumbnailUrl":"https://cdn-images-1.medium.com/max/1920/1*6RDl7zNmvg_4QSHVRrmYCw.png","keywords":["Tag:D3","Tag:JavaScript","Tag:Web Development","Tag:Software Development","Tag:Data Visualization","Publication:ninjaconcept","LockedPostSource:0","Elevated:false","LayerCake:0"],"author":{"@type":"Person","name":"Robin Frischmann","url":"https://medium.com/@rofrischmann"},"creator":["Robin Frischmann"],"publisher":{"@type":"Organization","name":"NinjaConcept","url":"https://medium.com/ninjaconcept","logo":{"@type":"ImageObject","width":180,"height":60,"url":"https://cdn-images-1.medium.com/max/180/1*Kde-D1MU1QETeIfHU602aw.png"}},"mainEntityOfPage":"https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811"}</script><meta name="parsely-link" content="https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811"><link rel="stylesheet" type="text/css" class="js-glyph-" id="glyph-8" href="https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css" /><link rel="stylesheet" href="https://cdn-static-1.medium.com/_/fp/css/main-branding-base.h0SGv1w1YKQgi84KqVJ5cw.css"><script>!function(n,e){var t,o,i,c=[],f={passive:!0,capture:!0},r=new Date,a="pointerup",u="pointercancel";function p(n,c){t||(t=c,o=n,i=new Date,w(e),s())}function s(){o>=0&&o<i-r&&(c.forEach(function(n){n(o,t)}),c=[])}function l(t){if(t.cancelable){var o=(t.timeStamp>1e12?new Date:performance.now())-t.timeStamp;"pointerdown"==t.type?function(t,o){function i(){p(t,o),r()}function c(){r()}function r(){e(a,i,f),e(u,c,f)}n(a,i,f),n(u,c,f)}(o,t):p(o,t)}}function w(n){["click","mousedown","keydown","touchstart","pointerdown"].forEach(function(e){n(e,l,f)})}w(n),self.perfMetrics=self.perfMetrics||{},self.perfMetrics.onFirstInputDelay=function(n){c.push(n),s()}}(addEventListener,removeEventListener);</script><script>if (window.top !== window.self) window.top.location = window.self.location.href;var OB_startTime = new Date().getTime(); var OB_loadErrors = []; function _onerror(e) { OB_loadErrors.push(e) }; if (document.addEventListener) document.addEventListener("error", _onerror, true); else if (document.attachEvent) document.attachEvent("onerror", _onerror); function _asyncScript(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("script"); s.type = "text/javascript"; s.async = true; s.src = u; f.parentNode.insertBefore(s, f);}function _asyncStyles(u) {var d = document, f = d.getElementsByTagName("script")[0], s = d.createElement("link"); s.rel = "stylesheet"; s.href = u; f.parentNode.insertBefore(s, f); return s}(new Image()).src = "/_/stat?event=pixel.load&origin=" + encodeURIComponent(location.origin);</script><script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date; ga("create", "UA-24232453-2", "auto", {"allowLinker": true, "legacyCookieDomain": window.location.hostname}); ga("send", "pageview");</script><script async src="https://www.google-analytics.com/analytics.js"></script><!--[if lt IE 9]><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js"></script><![endif]--><link rel="icon" href="https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico" class="js-favicon"><link rel="apple-touch-icon" sizes="152x152" href="https://cdn-images-1.medium.com/fit/c/152/152/1*LTxus9k21IEslDwdPeFRRA.png"><link rel="apple-touch-icon" sizes="120x120" href="https://cdn-images-1.medium.com/fit/c/120/120/1*LTxus9k21IEslDwdPeFRRA.png"><link rel="apple-touch-icon" sizes="76x76" href="https://cdn-images-1.medium.com/fit/c/76/76/1*LTxus9k21IEslDwdPeFRRA.png"><link rel="apple-touch-icon" sizes="60x60" href="https://cdn-images-1.medium.com/fit/c/60/60/1*LTxus9k21IEslDwdPeFRRA.png"><link rel="mask-icon" href="https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg" color="#171717"></head><body itemscope class=" postShowScreen browser-chrome is-withMagicUnderlines v-glyph v-glyph--m2 is-noJs"><script>document.body.className = document.body.className.replace(/(^|\s)is-noJs(\s|$)/, "$1is-js$2")</script><div class="site-main" id="container"><div class="butterBar butterBar--error"></div><div class="surface"><div id="prerendered" class="screenContent"><canvas class="canvas-renderer"></canvas><div class="container u-maxWidth740 u-xs-margin0 notesPositionContainer js-notesPositionContainer"></div><div class="metabar u-clearfix u-boxShadow4px12pxBlackLighter u-textColorTransparentWhiteDarker js-metabar"><div class="branch-journeys-top"></div><div class="js-metabarMiddle metabar-inner u-marginAuto u-maxWidth1032 u-flexCenter u-justifyContentSpaceBetween u-height65 u-xs-height56 u-paddingHorizontal20"><div class="metabar-block u-flex1 u-flexCenter"><div class="u-xs-hide js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-fillTransparentBlackDarker u-flex0 u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-flex0 u-flexCenter u-paddingTop0"><svg class="svgIcon-use" width="45" height="45" ><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div><div class="u-xs-show js-metabarLogoLeft"><a href="https://medium.com/" data-log-event="home" class="siteNav-logo u-fillTransparentBlackDarker u-flex0 u-flexCenter u-paddingTop0"><span class="svgIcon svgIcon--logoMonogram svgIcon--45px is-flushLeft u-flex0 u-flexCenter u-paddingTop0"><svg class="svgIcon-use" width="45" height="45" ><path d="M5 40V5h35v35H5zm8.56-12.627c0 .555-.027.687-.318 1.03l-2.457 2.985v.396h6.974v-.396l-2.456-2.985c-.291-.343-.344-.502-.344-1.03V18.42l6.127 13.364h.714l5.256-13.364v10.644c0 .29 0 .342-.185.528l-1.848 1.796v.396h9.19v-.396l-1.822-1.796c-.184-.186-.21-.238-.21-.528V15.937c0-.291.026-.344.21-.528l1.823-1.797v-.396h-6.471l-4.622 11.542-5.203-11.542h-6.79v.396l2.14 2.64c.239.292.291.37.291.768v10.353z"/></svg></span><span class="u-textScreenReader">Homepage</span></a></div></div><div class="metabar-block u-flex0 u-flexCenter"><div class="u-flexCenter u-height65 u-xs-height56"><div class="buttonSet buttonSet--wide u-lineHeightInherit"><label class="button button--small button--chromeless button--withIcon button--withSvgIcon inputGroup u-sm-hide metabar-predictiveSearch u-baseColor--buttonNormal u-baseColor--placeholderNormal" title="Search"><span class="svgIcon svgIcon--search svgIcon--25px u-baseColor--iconLight"><svg class="svgIcon-use" width="25" height="25" ><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"/></svg></span><input class="js-predictiveSearchInput textInput textInput--rounded textInput--darkText u-baseColor--textNormal textInput--transparent" type="search" placeholder="Search" required="true" data-collection-id="78a40cd88307" /></label><a class="button button--small button--chromeless u-sm-show is-inSiteNavBar u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--chromeless u-xs-top1"   href="https://medium.com/ninjaconcept/search" title="Search" aria-label="Search"><span class="button-defaultState"><span class="svgIcon svgIcon--search svgIcon--25px"><svg class="svgIcon-use" width="25" height="25" ><path d="M20.067 18.933l-4.157-4.157a6 6 0 1 0-.884.884l4.157 4.157a.624.624 0 1 0 .884-.884zM6.5 11c0-2.62 2.13-4.75 4.75-4.75S16 8.38 16 11s-2.13 4.75-4.75 4.75S6.5 13.62 6.5 11z"/></svg></span></span></a><button class="button button--small button--chromeless is-inSiteNavBar u-baseColor--buttonNormal button--withIcon button--withSvgIcon button--activity js-notificationsButton u-marginRight16 u-xs-marginRight10 u-lineHeight0 u-size25x25"  title="Notifications" aria-label="Notifications" data-action="open-notifications"><span class="svgIcon svgIcon--bell svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"  viewBox="-293 409 25 25"><path d="M-273.327 423.67l-1.673-1.52v-3.646a5.5 5.5 0 0 0-6.04-5.474c-2.86.273-4.96 2.838-4.96 5.71v3.41l-1.68 1.553c-.204.19-.32.456-.32.734V427a1 1 0 0 0 1 1h3.49a3.079 3.079 0 0 0 3.01 2.45 3.08 3.08 0 0 0 3.01-2.45h3.49a1 1 0 0 0 1-1v-2.59c0-.28-.12-.55-.327-.74zm-7.173 5.63c-.842 0-1.55-.546-1.812-1.3h3.624a1.92 1.92 0 0 1-1.812 1.3zm6.35-2.45h-12.7v-2.347l1.63-1.51c.236-.216.37-.522.37-.843v-3.41c0-2.35 1.72-4.356 3.92-4.565a4.353 4.353 0 0 1 4.78 4.33v3.645c0 .324.137.633.376.85l1.624 1.477v2.373z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal is-inSiteNavBar js-userActions"  aria-haspopup="true" data-action="open-userActions"><div class="avatar"><img  src="https://cdn-images-1.medium.com/fit/c/32/32/1*dmbNkD5D-u45r44go_cf0g.png" class="avatar-image avatar-image--icon" alt="Grzegorz Wierzowiecki"></div></button></div></div></div></div><div class="u-tintBgColor u-tintSpectrum " ><div class="metabar-inner u-marginAuto u-maxWidth1032 u-paddingHorizontal20 js-metabarBottom"><nav role="navigation" class="metabar-block metabar-block--below u-flexCenter u-overflowHidden u-height54"><div class="u-flexCenter u-overflowHidden"><div class="u-marginRight40"><a href="https://medium.com/ninjaconcept?source=logo-4b3a2a9faadc---78a40cd88307" class="u-flexCenter js-collectionLogoOrName"><img height="36" width="108" src="https://cdn-images-1.medium.com/letterbox/108/36/50/50/1*Kde-D1MU1QETeIfHU602aw.png?source=logoAvatar-4b3a2a9faadc---78a40cd88307" alt="NinjaConcept" /></a></div><div class="u-overflowHidden u-xs-hide"><ul class="u-textAlignLeft u-noWrap u-overflowX u-height80 u-marginTop40 js-collectionNavItems"><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darker link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink"   href="https://medium.com/ninjaconcept/tagged/software-development">Development</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink"   href="https://medium.com/ninjaconcept/tagged/user-experience-design">Design</a></li><li class="metabar-navItem js-collectionNavItem  u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darken u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink"   href="https://medium.com/ninjaconcept/about">About</a></li><span class="u-borderLeft1 u-paddingLeft12 u-baseColor--borderLight"></span><li class="metabar-navItem js-collectionNavItem  u-paddingLeft0 is-external u-inlineBlock u-fontSize13 u-textUppercase u-letterSpacing1px u-textColorNormal u-xs-paddingRight12 u-xs-marginRight0 u-xs-paddingTop10"><a class="link link--darkenOnHover u-accentColor--textDarken link--noUnderline u-baseColor--link js-navItemLink"   href="https://www.ninjaconcept.com" rel="nofollow noopener" target="_blank">Website</a></li></ul></div></div></nav></div></div></div><div class="metabar metabar--spacer js-metabarSpacer u-tintBgColor  u-height119 u-xs-height110"></div><main role="main"><article class=" u-minHeight100vhOffset65 u-overflowHidden postArticle postArticle--full is-withAccentColors"  lang="en"><div class="postArticle-content js-postField js-notesSource js-trackPostScrolls"  data-post-id="da720c6d7811" data-source="post_page" data-collection-id="78a40cd88307" data-tracking-context="postPage"><section name="47eb" class="section section--body section--first"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h1 name="1cc1" id="1cc1" class="graf graf--h3 graf--leading graf--title">Interactive &amp; Dynamic Force-Directed Graphs with D3</h1><h2 name="d6f5" id="d6f5" class="graf graf--h4 graf-after--h3 graf--subtitle">A guided tour through D3 version 4.0 force simulations with dynamic data and user interaction</h2><div class="uiScale uiScale-ui--regular uiScale-caption--regular u-flexCenter u-marginVertical24 u-fontSize15 js-postMetaLockup"><div class="u-flex0"><a class="link u-baseColor--link avatar"   href="https://medium.com/@rofrischmann?source=post_header_lockup" data-action="show-user-card" data-action-source="post_header_lockup" data-action-value="1f4a8917ae9d" data-action-type="hover" data-user-id="1f4a8917ae9d" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/50/50/1*kHyejmD-gSHBGZZ0OM-2Hw.jpeg" class="avatar-image u-size50x50" alt="Go to the profile of Robin Frischmann"></a></div><div class="u-flex1 u-paddingLeft15 u-overflowHidden"><div class="u-paddingBottom3"><a class="ds-link ds-link--styleSubtle ui-captionStrong u-inlineBlock link link--darken link--darker"   href="https://medium.com/@rofrischmann" data-action="show-user-card" data-action-value="1f4a8917ae9d" data-action-type="hover" data-user-id="1f4a8917ae9d" dir="auto">Robin Frischmann</a></div><div class="ui-caption u-noWrapWithEllipsis js-testPostMetaInlineSupplemental"><time datetime="2017-02-13T08:26:40.912Z">Feb 13, 2017</time><span class="middotDivider u-fontSize12"></span><span class="readingTime" title="12 min read"></span></div></div></div></div><div class="section-inner sectionLayout--outsetColumn"><figure name="e30b" id="e30b" class="graf graf--figure graf--layoutOutsetCenter graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 1032px; max-height: 443px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 42.9%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*6RDl7zNmvg_4QSHVRrmYCw.png" data-width="2453" data-height="1053" data-action="zoom" data-action-value="1*6RDl7zNmvg_4QSHVRrmYCw.png"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*6RDl7zNmvg_4QSHVRrmYCw.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/1200/1*6RDl7zNmvg_4QSHVRrmYCw.png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/1200/1*6RDl7zNmvg_4QSHVRrmYCw.png"></noscript></div></div><figcaption class="imageCaption">Preview of the final product with a custom “space” design (replaced the real data with mocks)</figcaption></figure></div><div class="section-inner sectionLayout--insetColumn"><p name="b251" id="b251" class="graf graf--p graf-after--figure">Many companies have a tremendous amount of data which is not just hard to maintain and manage, but also hard to understand and analyse. Here, data visualisation should find a remedy. The main goal is to communicate information clearly and efficiently which improves the overall experience.</p><p name="8561" id="8561" class="graf graf--p graf-after--p">In this post, I want to explain how we, at <a href="https://www.ninjaconcept.com" data-href="https://www.ninjaconcept.com" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">NinjaConcept</a>, used D3 to create an interactive and dynamic force-directed graph which helped us to display nested data with complex relations in a simple natural way.</p><h3 name="6f7b" id="6f7b" class="graf graf--h3 graf-after--p">Background</h3><p name="1b16" id="1b16" class="graf graf--p graf-after--h3">Before we start, I want to explain which requirements we had to fulfill. This might help to understand our decisions better.</p><h4 name="0007" id="0007" class="graf graf--h4 graf-after--p">Requirements</h4><p name="dba2" id="dba2" class="graf graf--p graf-after--h4">First of all, the data we had to display was composed of both specially prepared data as well as extractions of the companies long-standing knowledge management system(s).<br>The hardware requirement was very interesting, too. The graph would have to be build primarily for the new <a href="https://www.microsoft.com/microsoft-surface-hub/" data-href="https://www.microsoft.com/microsoft-surface-hub/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Microsoft Surface Hub</a>, which had a lot of fun playing with. Though, the exiting part was to create a touch-focused interactive app that leverages the advantage of the multi-touch device.</p><blockquote name="ffdf" id="ffdf" class="graf graf--blockquote graf-after--p">Fun fact: We had been able to track up to 13 different fingers at once! Great work, Microsoft.</blockquote><h4 name="3c06" id="3c06" class="graf graf--h4 graf-after--blockquote">Why D3?</h4><p name="7339" id="7339" class="graf graf--p graf-after--h4">As soon as we knew all of the customers requirements, we had to think about which technologies we would use to build the application. After several research and comparison, we chose to use React as our primary user interface library which we would later integrate with D3 and a Meteor backend to serve all the data and other services.</p><p name="e041" id="e041" class="graf graf--p graf-after--p">We chose D3 not just because of its popularity and bulletproof core, but especially because of the amazing physical tools provided by <a href="https://github.com/d3/d3-force" data-href="https://github.com/d3/d3-force" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">d3-force</a>.</p><h3 name="d5a3" id="d5a3" class="graf graf--h3 graf-after--p">Data</h3><p name="b88d" id="b88d" class="graf graf--p graf-after--h3">D3 is all about (complex) data visualisation. Our goal was to build a force-directed graph similar to <a href="https://bl.ocks.org/mbostock/4062045" data-href="https://bl.ocks.org/mbostock/4062045" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">this example</a> by D3’s creator <a href="https://bost.ocks.org/mike/" data-href="https://bost.ocks.org/mike/" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">Mike Bostock</a> himself.<br>It is based on d3-force and uses the <a href="https://github.com/d3/d3-force#simulation" data-href="https://github.com/d3/d3-force#simulation" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">forceSimulation API</a>.</p><h4 name="90a5" id="90a5" class="graf graf--h4 graf-after--p">Nodes</h4><p name="2f5f" id="2f5f" class="graf graf--p graf-after--h4">Every simulation effectively takes a list of data objects and uses them as <strong class="markup--strong markup--p-strong">nodes</strong>. Think of those nodes as the data bubbles in the above mentioned example.</p><p name="32a2" id="32a2" class="graf graf--p graf-after--p">For simplicity, we are using a very basic example set of nodes to focus on the implementation. We are using the following list of animals and animal species, where the animals are sub-nodes of the species.</p><pre name="a650" id="a650" class="graf graf--pre graf-after--p">[ <br>  { id: &quot;mammal&quot;, group: 0, label: &quot;Mammals&quot;, level: 1 },<br>  { id: &quot;dog&quot;   , group: 0, label: &quot;Dogs&quot;   , level: 2 },<br>  { id: &quot;cat&quot;   , group: 0, label: &quot;Cats&quot;   , level: 2 },<br>  { id: &quot;fox&quot;   , group: 0, label: &quot;Foxes&quot;  , level: 2 }, <br>  { id: &quot;elk&quot;   , group: 0, label: &quot;Elk&quot;    , level: 2 },<br>  { id: &quot;insect&quot;, group: 1, label: &quot;Insects&quot;, level: 1 },<br>  { id: &quot;ant&quot;   , group: 1, label: &quot;Ants&quot;   , level: 2 },<br>  { id: &quot;bee&quot;   , group: 1, label: &quot;Bees&quot;   , level: 2 },  <br>  { id: &quot;fish&quot;  , group: 2, label: &quot;Fish&quot;   , level: 1 },<br>  { id: &quot;carp&quot;  , group: 2, label: &quot;Carp&quot;   , level: 2 },<br>  { id: &quot;pike&quot;  , group: 2, label: &quot;Pikes&quot;  , level: 2 } <br>]</pre><p name="da74" id="da74" class="graf graf--p graf-after--pre">The key is a unique node id and the level references the level of nesting. The group references one of these groups:</p><pre name="f4a4" id="f4a4" class="graf graf--pre graf-after--p">{<br>  0: &quot;mammal&quot;,<br>  1: &quot;insect&quot;,<br>  2: &quot;fish&quot;<br>}</pre><h4 name="9319" id="9319" class="graf graf--h4 graf-after--pre">Links</h4><p name="c7fa" id="c7fa" class="graf graf--p graf-after--h4">Another important feature of force simulations are links. They connect nodes to display (complex) <strong class="markup--strong markup--p-strong">relations</strong>. Every link needs to have at least a <strong class="markup--strong markup--p-strong">source</strong> and a <strong class="markup--strong markup--p-strong">target</strong>. Both are ids referencing one of the above nodes.</p><p name="3676" id="3676" class="graf graf--p graf-after--p">Next to special links, every sub-node <em class="markup--em markup--p-em">(with level &gt; 1)</em> is at least linked to its parent node. We are using the following links:</p><pre name="bfcd" id="bfcd" class="graf graf--pre graf-after--p">[<br>  { target: &quot;mammal&quot;, source: &quot;dog&quot; , strength: 0.7 },<br>  { target: &quot;mammal&quot;, source: &quot;cat&quot; , strength: 0.7 },<br>  { target: &quot;mammal&quot;, source: &quot;fox&quot; , strength: 0.7 },<br>  { target: &quot;mammal&quot;, source: &quot;elk&quot; , strength: 0.7 },<br>  { target: &quot;insect&quot;, source: &quot;ant&quot; , strength: 0.7 },<br>  { target: &quot;insect&quot;, source: &quot;bee&quot; , strength: 0.7 },<br>  { target: &quot;fish&quot;  , source: &quot;carp&quot;, strength: 0.7 },<br>  { target: &quot;fish&quot;  , source: &quot;pike&quot;, strength: 0.7 },</pre><pre name="b141" id="b141" class="graf graf--pre graf-after--pre graf--trailing">  { target: &quot;cat&quot;   , source: &quot;elk&quot; , strength: 0.1 },<br>  { target: &quot;carp&quot;  , source: &quot;ant&quot; , strength: 0.1 },<br>  { target: &quot;elk&quot;   , source: &quot;bee&quot; , strength: 0.1 },<br>  { target: &quot;dog&quot;   , source: &quot;cat&quot; , strength: 0.1 },<br>  { target: &quot;fox&quot;   , source: &quot;ant&quot; , strength: 0.1 },<br>  { target: &quot;pike&quot;  , source: &quot;dog&quot; , strength: 0.1 }<br>]</pre></div></div></section><section name="1619" class="section section--body section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="e25e" id="e25e" class="graf graf--h3 graf--leading">Implementation</h3><p name="be72" id="be72" class="graf graf--p graf-after--h3">Before we finally start with the implementation, let me describe how we went on. First of all we tried to simply display all the nodes in colored groups. Then we’d add relations (links) and user interaction through touch events. Afterwards we made the whole graph dynamic by default which means adding and removing nodes and links depending on the current selection. Finally, we applied some styling to make the whole graph not only feel great, but actually look great as well.</p><blockquote name="b4b4" id="b4b4" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">Disclaimer</strong>: The code showed below is written in ECMAScript 2015, although the linked Gists (Bl.ocks) are written in good-old ES5 for compatibility reasons. I will add a full demo including both ES5 and ECMAScript 2015 versions at the end. Cursive words refer to variables or parts of the code itself.</blockquote><h4 name="7e2a" id="7e2a" class="graf graf--h4 graf-after--blockquote">Displaying Nodes</h4><figure name="7121" id="7121" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 393px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 56.2%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*95tYB_xTNmj9Jy3cQnwt6Q.png" data-width="1438" data-height="808" data-action="zoom" data-action-value="1*95tYB_xTNmj9Jy3cQnwt6Q.png"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*95tYB_xTNmj9Jy3cQnwt6Q.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*95tYB_xTNmj9Jy3cQnwt6Q.png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*95tYB_xTNmj9Jy3cQnwt6Q.png"></noscript></div></div></figure><p name="a9aa" id="a9aa" class="graf graf--p graf-after--figure">To start simple, first of all we need to somehow display our data in a force-directed graph using D3. Luckily, this is really straight-forward as we can just take the responsible code snippets from the above mentioned example.</p><p name="4111" id="4111" class="graf graf--p graf-after--p">Let’s start by selecting a svg element with D3, which will function as a canvas for our graph later. We then set its <em class="markup--em markup--p-em">width</em> and <em class="markup--em markup--p-em">height</em> to fill the window.</p><pre name="4281" id="4281" class="graf graf--pre graf-after--p">const width = window.innerWidth<br>const height = window.innerHeight</pre><pre name="5720" id="5720" class="graf graf--pre graf-after--pre">const svg = d3.select(&#39;svg&#39;)<br>  .attr(&#39;width&#39;, width)<br>  .attr(&#39;height&#39;, height)</pre><p name="7e32" id="7e32" class="graf graf--p graf-after--pre">Now that we have our container ready, we can create <em class="markup--em markup--p-em">forceSimulation</em> instance. We also add two different forces. The first one, <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">charge</em> </strong>is global force that affects <strong class="markup--strong markup--p-strong">every</strong> node. It simulates electrostatic effects, which makes the graph feel organic and natural as the nodes affect each other. If we’d use a positive <em class="markup--em markup--p-em">strength</em>, it’d simulate a gravitational pull.<br>The second one, <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">center</em></strong>, simply translates all nodes to visually move them into the center of the svg element.</p><pre name="6c0b" id="6c0b" class="graf graf--pre graf-after--p">const simulation = d3.forceSimulation()<br>  .force(&#39;charge&#39;, d3.forceManyBody().strength(-20)) <br>  .force(&#39;center&#39;, d3.forceCenter(width / 2, height / 2))</pre><p name="3b80" id="3b80" class="graf graf--p graf-after--pre">To draw the <em class="markup--em markup--p-em">circle</em> and <em class="markup--em markup--p-em">text</em> elements (nodes), we will add two additional <em class="markup--em markup--p-em">g </em>elements and use the <em class="markup--em markup--p-em">nodes</em>-array as data source. In order to differentiate species from animals, we will use different colors for their respective circles.<br>Despite to basic attributes such as <em class="markup--em markup--p-em">r</em>, <em class="markup--em markup--p-em">fill</em> or <em class="markup--em markup--p-em">font-size</em>, we also used <em class="markup--em markup--p-em">dx</em> and <em class="markup--em markup--p-em">dy</em> to relatively position the <em class="markup--em markup--p-em">text</em> elements to the right of the <em class="markup--em markup--p-em">nodes</em>.</p><pre name="c265" id="c265" class="graf graf--pre graf-after--p">function getNodeColor(node) {<br>  return node.level === 1 ? &#39;red&#39; : &#39;gray&#39;<br>}</pre><pre name="3371" id="3371" class="graf graf--pre graf-after--pre">const nodeElements = svg.append(&#39;g&#39;)<br>  .selectAll(&#39;circle&#39;)<br>  .data(nodes)<br>  .enter().append(&#39;circle&#39;)<br>    .attr(&#39;r&#39;, 10)<br>    .attr(&#39;fill&#39;, getNodeColor)<br><br></pre><pre name="ebd9" id="ebd9" class="graf graf--pre graf-after--pre">const textElements = svg.append(&#39;g&#39;)<br>  .selectAll(&#39;text&#39;)<br>  .data(nodes)<br>  .enter().append(&#39;text&#39;)<br>    .text(node =&gt; node.label)<br>    .attr(&#39;font-size&#39;, 15)<br>    .attr(&#39;dx&#39;, 15)<br>    .attr(&#39;dy&#39;, 4)</pre><p name="06d0" id="06d0" class="graf graf--p graf-after--pre">Finally, we need to start the simulation and define a tick functions that is executed on every simulation tick. There, we will basically update the <strong class="markup--strong markup--p-strong">coordinates</strong> of both <em class="markup--em markup--p-em">node</em> and <em class="markup--em markup--p-em">text</em> elements.</p><pre name="490a" id="490a" class="graf graf--pre graf-after--p">simulation.nodes(nodes).on(‘tick’, () =&gt; {<br>  nodeElements<br>    .attr(“cx”, node =&gt; node.x)<br>    .attr(“cy”, node =&gt; node.y)<br>  textElements<br>    .attr(“x”, node =&gt; node.x)<br>    .attr(“y”, node =&gt; node.y)<br>})</pre><div name="a80d" id="a80d" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce" data-href="https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce" rel="nofollow"><strong class="markup--strong markup--mixtapeEmbed-strong">Displaying Nodes</strong><br><em class="markup--em markup--mixtapeEmbed-em">Robin Frischmann&#39;s Block 8f88c54b78f16291bdcc5f2df406d6ce</em>bl.ocks.org</a><a href="https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="070ea4022b701d54932ce0174e04ce33"></a></div><h4 name="d003" id="d003" class="graf graf--h4 graf-after--mixtapeEmbed">Relations</h4><figure name="3c74" id="3c74" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 374px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 53.400000000000006%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*Ch-pXyGYv-YnLdQ0XHwUaQ.png" data-width="1270" data-height="678" data-action="zoom" data-action-value="1*Ch-pXyGYv-YnLdQ0XHwUaQ.png"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*Ch-pXyGYv-YnLdQ0XHwUaQ.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*Ch-pXyGYv-YnLdQ0XHwUaQ.png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*Ch-pXyGYv-YnLdQ0XHwUaQ.png"></noscript></div></div></figure><p name="fb23" id="fb23" class="graf graf--p graf-after--figure">With our basic data displayed, we now want to show all the relations (links) to understand the connections between the nodes. Links also create forces which either push nodes together or apart depending on the applied strength. This is the point where we make use of the above defined strength for each link: specie-animal relations will have stronger forces to group the nodes tighter together, while cross-relations will pull much softer.</p><p name="868e" id="868e" class="graf graf--p graf-after--p">We start by adding the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">link</em></strong> force to our simulation.</p><pre name="de36" id="de36" class="graf graf--pre graf-after--p">simulation.force(&#39;link&#39;, d3.forceLink()<br>  .id(link =&gt; link.id)<br>  .strength(link =&gt; link.strength))</pre><p name="cd19" id="cd19" class="graf graf--p graf-after--pre">Then we can create the <em class="markup--em markup--p-em">line</em> elements to display our <em class="markup--em markup--p-em">links</em> respectively. This works basically the same as the<em class="markup--em markup--p-em"> circle</em> and <em class="markup--em markup--p-em">text</em> elements as well.</p><pre name="f15f" id="f15f" class="graf graf--pre graf-after--p">const linkElements = svg.append(&#39;g&#39;)<br>  .selectAll(&#39;line&#39;)<br>  .data(links)<br>  .enter().append(&#39;line&#39;)<br>    .attr(&#39;stroke-width&#39;, 1)<br>    .attr(&#39;stroke&#39;, &#39;#E5E5E5&#39;)</pre><p name="15dd" id="15dd" class="graf graf--p graf-after--pre">In order to move the links on every tick, we add the following snippet to the <em class="markup--em markup--p-em">tick</em>-function.</p><pre name="8144" id="8144" class="graf graf--pre graf-after--p">linkElements<br> .attr(&#39;x1&#39;, link =&gt; link.source.x)<br> .attr(&#39;y1&#39;, link =&gt; link.source.y)<br> .attr(&#39;x2&#39;, link =&gt; link.target.x)<br> .attr(&#39;y2&#39;, link =&gt; link.target.y)</pre><p name="5fc7" id="5fc7" class="graf graf--p graf-after--pre">In a final step we need to apply all <em class="markup--em markup--p-em">links</em> to the <strong class="markup--strong markup--p-strong"><em class="markup--em markup--p-em">link</em></strong> force.</p><pre name="8bcd" id="8bcd" class="graf graf--pre graf-after--p">simulation.force(&#39;link&#39;).link(links)</pre><div name="e956" id="e956" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7" data-href="https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7" rel="nofollow"><strong class="markup--strong markup--mixtapeEmbed-strong">Relations</strong><br><em class="markup--em markup--mixtapeEmbed-em">Robin Frischmann&#39;s Block ef51753ff4ac2b7d6ebdb04ac182b5c7</em>bl.ocks.org</a><a href="https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="aca3828656e1415ff440bd16fbca12b6"></a></div><h4 name="4a36" id="4a36" class="graf graf--h4 graf-after--mixtapeEmbed">User Interaction</h4><figure name="3363" id="3363" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 373px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 53.300000000000004%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*ldD4TgMfpYkwlfM3Xxphig.png" data-width="1292" data-height="688" data-action="zoom" data-action-value="1*ldD4TgMfpYkwlfM3Xxphig.png"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*ldD4TgMfpYkwlfM3Xxphig.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*ldD4TgMfpYkwlfM3Xxphig.png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*ldD4TgMfpYkwlfM3Xxphig.png"></noscript></div></div></figure><p name="7964" id="7964" class="graf graf--p graf-after--figure">To be able to interact with the graph, we at least need drag &amp; drop. Again, D3 already provides a nice API to add D&amp;D without pain. This was basically copied from the example as well. The <em class="markup--em markup--p-em">alphaTarget</em> adjustments help us to create a more natural feeling and to rerun the simulation after the drop.</p><p name="25fe" id="25fe" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Drag &amp; Drop</strong></p><pre name="fef2" id="fef2" class="graf graf--pre graf-after--p">const dragDrop = d3.drag()<br>  .on(&#39;start&#39;, node =&gt; {<br>    node.fx = node.x<br>    node.fy = node.y<br>  })<br>  .on(&#39;drag&#39;, node =&gt; {<br>    simulation.alphaTarget(0.7).restart()<br>    node.fx = d3.event.x<br>    node.fy = d3.event.y<br>  })<br>  .on(&#39;end&#39;, node =&gt; {<br>    if (!d3.event.active) {<br>      simulation.alphaTarget(0)<br>    }<br>    node.fx = null<br>    node.fy = null<br>  })</pre><p name="bf5c" id="bf5c" class="graf graf--p graf-after--pre">To activate the <em class="markup--em markup--p-em">dragDrop</em> events, we only need to add it to the <em class="markup--em markup--p-em">nodeElements</em>.</p><pre name="ef6c" id="ef6c" class="graf graf--pre graf-after--p">nodeElements.call(dragDop)</pre><p name="293c" id="293c" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Highlight Selection</strong></p><p name="2f32" id="2f32" class="graf graf--p graf-after--p">Additionally, we wanted to be able to select nodes in order to highlight their relations. To highlight the selection with all its connection we need to know two things.</p><ol class="postList"><li name="3032" id="3032" class="graf graf--li graf-after--p">Who are the direct neighbors of the clicked node?</li><li name="3316" id="3316" class="graf graf--li graf-after--li">Which links connect the clicked node with its neighbors?</li></ol><p name="a1a7" id="a1a7" class="graf graf--p graf-after--li">This turns out to be very basic. We simply iterate all links and check if either the <em class="markup--em markup--p-em">target</em> or the <em class="markup--em markup--p-em">source</em> match the <em class="markup--em markup--p-em">node’s</em> <strong class="markup--strong markup--p-strong">id</strong>. If yes, we add the counterpart, which then obviously is a direct neighbor. <em class="markup--em markup--p-em">e.g. If the target.id matches the node.id, we add the source.id to the neighbors-list</em>. (see <em class="markup--em markup--p-em">getNeighbors</em>)</p><p name="2c78" id="2c78" class="graf graf--p graf-after--p">To determine if a link connects the clicked node with one of its neighbors, we basically do the same. A link is a “connection-link” if <strong class="markup--strong markup--p-strong">either</strong> the<em class="markup--em markup--p-em"> target.id</em> <strong class="markup--strong markup--p-strong">or</strong> the <em class="markup--em markup--p-em">source.id</em> match the <em class="markup--em markup--p-em">node.id</em>. (see <em class="markup--em markup--p-em">isNeighborLink</em>)</p><pre name="303d" id="303d" class="graf graf--pre graf-after--p">function getNeighbors(node) {<br>  return links.reduce((neighbors, link) =&gt; {<br>    if (link.target.id === node.id) {<br>      neighbors.push(link.source.id)<br>    } else if (link.source.id === node.id) {<br>      neighbors.push(link.target.id)<br>    }</pre><pre name="5d99" id="5d99" class="graf graf--pre graf-after--pre">    return neighbors<br>  }, [node.id])<br>}</pre><pre name="22da" id="22da" class="graf graf--pre graf-after--pre">function isNeighborLink(node, link) {<br>  return link.target.id === node.id || link.source.id === node.id<br>}</pre><p name="cffe" id="cffe" class="graf graf--p graf-after--pre">A simple way to visually highlight the nodes and links is by changing their colors. Therefore, we will use the below functions <em class="markup--em markup--p-em">getTextColor</em>, <em class="markup--em markup--p-em">getLinkColor</em> and <em class="markup--em markup--p-em">getNodeColor</em> (which replaces the previous <em class="markup--em markup--p-em">getNodeColor</em>).<br>Now, all highlighted animal nodes will be colored green, all specie nodes blue. “connection-links” will be colored in green as well.</p><pre name="b768" id="b768" class="graf graf--pre graf-after--p">function getNodeColor(node, neighbors) {<br>  if (neighbors.indexOf(node.id)) {<br>    return node.level === 1 ? &#39;blue&#39; : &#39;green&#39;<br>  }<br>  return node.level === 1 ? &#39;red&#39; : &#39;gray&#39;<br>}</pre><pre name="3d50" id="3d50" class="graf graf--pre graf-after--pre">function getTextColor(node, neighbors) {<br>  return neighbors.indexOf(node.id) ? &#39;green&#39; : &#39;black&#39;<br>}</pre><pre name="560f" id="560f" class="graf graf--pre graf-after--pre">function getLinkColor(node, link) {<br>  return isNeighborLink(node, link) ? &#39;green&#39; : &#39;#E5E5E5&#39;<br>}</pre><p name="cf30" id="cf30" class="graf graf--p graf-after--pre">Bringing it all together, we have the following <em class="markup--em markup--p-em">selectNode</em>-function. It updates the colors of all nodes, texts and links depending on their “neighborhood-status”.</p><pre name="8d0f" id="8d0f" class="graf graf--pre graf-after--p">function selectNode(selectedNode) {<br>  const neighbors = getNeighbors(selectedNode)</pre><pre name="b9f1" id="b9f1" class="graf graf--pre graf-after--pre">  nodeElements<br>    .attr(&#39;fill&#39;, node =&gt; getNodeColor(node, neighbors)) <br>  textElements<br>    .attr(&#39;fill&#39;, node =&gt; getTextColor(node, neighbors))<br>  linkElements<br>    .attr(&#39;stroke&#39;, link =&gt; getLinkColor(selectedNode, link))<br>}</pre><p name="bf62" id="bf62" class="graf graf--p graf-after--pre">Last but not least, we need to add a <strong class="markup--strong markup--p-strong">click-event listener</strong> to every node element which calls <em class="markup--em markup--p-em">selectNode</em>.</p><pre name="a923" id="a923" class="graf graf--pre graf-after--p">nodeElements.on(&#39;click&#39;, selectNode)</pre><div name="55e1" id="55e1" class="graf graf--mixtapeEmbed graf-after--pre"><a href="https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535" data-href="https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535" rel="nofollow"><strong class="markup--strong markup--mixtapeEmbed-strong">User Interaction</strong><br><em class="markup--em markup--mixtapeEmbed-em">Robin Frischmann&#39;s Block 74e3b61530c350d1ec1771416249a535</em>bl.ocks.org</a><a href="https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="a9db983499f3c4269b56bc381663f90c"></a></div><h4 name="e619" id="e619" class="graf graf--h4 graf-after--mixtapeEmbed">Dynamic Updates</h4><figure name="e195" id="e195" class="graf graf--figure graf-after--h4"><div class="aspectRatioPlaceholder is-locked" style="max-width: 700px; max-height: 309px;"><div class="aspectRatioPlaceholder-fill" style="padding-bottom: 44.1%;"></div><div class="progressiveMedia js-progressiveMedia graf-image" data-image-id="1*p9k1GeQtwoaA3vr1p3h7OQ.png" data-width="1392" data-height="614" data-action="zoom" data-action-value="1*p9k1GeQtwoaA3vr1p3h7OQ.png"><img src="https://cdn-images-1.medium.com/freeze/max/30/1*p9k1GeQtwoaA3vr1p3h7OQ.png?q=20" crossorigin="anonymous" class="progressiveMedia-thumbnail js-progressiveMedia-thumbnail"><canvas class="progressiveMedia-canvas js-progressiveMedia-canvas"></canvas><img class="progressiveMedia-image js-progressiveMedia-image" data-src="https://cdn-images-1.medium.com/max/800/1*p9k1GeQtwoaA3vr1p3h7OQ.png"><noscript class="js-progressiveMedia-inner"><img class="progressiveMedia-noscript js-progressiveMedia-inner" src="https://cdn-images-1.medium.com/max/800/1*p9k1GeQtwoaA3vr1p3h7OQ.png"></noscript></div></div></figure><p name="7d3d" id="7d3d" class="graf graf--p graf-after--figure">We already have a nice overview of our data, but that is still not enough. Often, data is not something static, but highly dynamic and frequently changes in the course of time. Therefore, we want the graph to update on every change.<br>Also, with growing data, the graph gets more and more overgrowded and thus confusing and won’t feel very user-friendly anymore. By hiding many sub-nodes to only show up when they’re effectively required <em class="markup--em markup--p-em">(e.g. if they have connections to the currently selected node).</em></p><p name="6d6c" id="6d6c" class="graf graf--p graf-after--p">That’s why, for both cases, we need the ability to update the graph without a complete reload. Otherwise the simulation would restart and all efforts to ship a user-friendly application would ultimately be destroyed.</p><p name="a408" id="a408" class="graf graf--p graf-after--p">Luckily, D3 got us covered (again) with a great example on how to directly modify force-directed graphs. It uses the recommended update pattern, which can be described as: <strong class="markup--strong markup--p-strong">Mutate &gt; Replace.</strong></p><p name="3166" id="3166" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Updating the Data</strong></p><p name="95b0" id="95b0" class="graf graf--p graf-after--p">First of all, we need to mutate our data. As we directly mutate the <em class="markup--em markup--p-em">nodes</em> and <em class="markup--em markup--p-em">links</em>, we use a copy with all nodes and links for reference. To actually mutate the nodes, we need to know which nodes get removed and which get added. We again use the neighbors to check which nodes to display. The species nodes should always be visible though.</p><p name="c918" id="c918" class="graf graf--p graf-after--p">Therefore we are generating a diff. Then, we simply use the diff to add and remove the affected nodes. The same method also applies to the links, although we do not need to mutate them, but can create a whole new array of links as well.</p><pre name="447b" id="447b" class="graf graf--pre graf-after--p">function updateData(selectedNode) {<br>  const neighbors = getNeighbors(selectedNode)</pre><pre name="67b0" id="67b0" class="graf graf--pre graf-after--pre">  const newNodes = baseNodes.filter(node =&gt; {<br>    return neighbors.indexOf(node.id) &gt; -1 || node.level === 1<br>  })</pre><pre name="db5a" id="db5a" class="graf graf--pre graf-after--pre">  const diff = {<br>    removed: nodes.filter(node =&gt; newNodes.indexOf(node) === -1),<br>    added: newNodes.filter(node =&gt; nodes.indexOf(node) === -1)<br>  }</pre><pre name="79ab" id="79ab" class="graf graf--pre graf-after--pre">  diff.removed.forEach(node =&gt; nodes.splice(nodes.indexOf(node), 1))<br>  diff.added.forEach(node =&gt; nodes.push(node))</pre><pre name="3353" id="3353" class="graf graf--pre graf-after--pre">  links = baseLinks.filter(link =&gt; {<br>    return link.target.id === selectedNode.id || <br>           link.source.id === selectedNode.id<br>  })<br>}</pre><p name="546a" id="546a" class="graf graf--p graf-after--pre"><strong class="markup--strong markup--p-strong">Updating the Nodes &amp; Links</strong></p><p name="f1ff" id="f1ff" class="graf graf--p graf-after--p">Now that we have both <em class="markup--em markup--p-em">nodes</em> and <em class="markup--em markup--p-em">links</em> up-to-date, we need to update the DOM elements to correctly display the new data. D3 will try to reuse existing nodes to only mutate the minimum set of elements. <strong class="markup--strong markup--p-strong">That the reason why we mutate the data rather than overwriting it.</strong></p><p name="4d73" id="4d73" class="graf graf--p graf-after--p">We need to modularize the element creation in order to react on updates. Using special svg groups helps us to better group the elements together:</p><pre name="a96b" id="a96b" class="graf graf--pre graf-after--p">const linkGroup = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;links&quot;)<br>const nodeGroup = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;nodes&quot;)<br>const textGroup = svg.append(&quot;g&quot;).attr(&quot;class&quot;, &quot;texts&quot;)</pre><pre name="9718" id="9718" class="graf graf--pre graf-after--pre">let linkElements, nodeElements, textElements</pre><p name="5dab" id="5dab" class="graf graf--p graf-after--pre">Updating existing elements requires to remove old ones and then merge the new ones. Again, D3 has a pretty straightforward pattern to do so.</p><pre name="fa31" id="fa31" class="graf graf--pre graf-after--p">linkElements = linkGroup.selectAll(&quot;line&quot;).data(links, link =&gt; {<br>  return link.target.id + link.source.id<br>})</pre><pre name="d2c5" id="d2c5" class="graf graf--pre graf-after--pre">// 1. remove old nodes<br>linkElements.exit().remove()</pre><pre name="3e5e" id="3e5e" class="graf graf--pre graf-after--pre">// 2. enter and create new ones<br>const linkEnter = linkElements<br>  .enter().append(&quot;line&quot;)<br>  .attr(&quot;stroke-width&quot;, 1)<br>  .attr(&quot;stroke&quot;, &quot;rgba(50, 50, 50, 0.2)&quot;)</pre><pre name="fa74" id="fa74" class="graf graf--pre graf-after--pre">// 3. merge<br>linkElements = linkEnter.merge(linkElements)</pre><p name="8fc9" id="8fc9" class="graf graf--p graf-after--pre">We will repeat the exact same pattern for both nodes and texts as well and wrap the snippets inside the so-called <em class="markup--em markup--p-em">updateGraph</em>-method to later reuse it.</p><p name="0af6" id="0af6" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Updating the Simulation</strong></p><p name="de80" id="de80" class="graf graf--p graf-after--p">Last but not least, we need to update the simulation to apply the above changes. The following function will update the graph using the above <em class="markup--em markup--p-em">updateGraph</em>-method. Afterwards it reinitialises the simulation with the new nodes and links and then restart it.</p><pre name="a708" id="a708" class="graf graf--pre graf-after--p">function updateSimulation() {<br>  updateGraph()</pre><pre name="1fa0" id="1fa0" class="graf graf--pre graf-after--pre">  simulation.nodes.on(&quot;tick&quot;, /* see above */)<br>  simulation.force(&quot;links&quot;)</pre><pre name="915c" id="915c" class="graf graf--pre graf-after--pre">  simulation.restart()<br>}</pre><p name="91a8" id="91a8" class="graf graf--p graf-after--pre">To dynamically update the graph depending on the users interaction, we can embed the <em class="markup--em markup--p-em">updateData</em> and <em class="markup--em markup--p-em">updateSimulation</em>-methods into the <em class="markup--em markup--p-em">selectNode</em>-method that is called on every node.</p><div name="39b8" id="39b8" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1" data-href="https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1" rel="nofollow"><strong class="markup--strong markup--mixtapeEmbed-strong">Dynamic Updates</strong><br><em class="markup--em markup--mixtapeEmbed-em">Robin Frischmann&#39;s Block 0de01de85296591eb45a1dde2040c5a1</em>bl.ocks.org</a><a href="https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1" class="js-mixtapeImage mixtapeImage mixtapeImage--empty u-ignoreBlock" data-media-id="e5a92e40dd32371d645581b3b31341df"></a></div><h4 name="6e24" id="6e24" class="graf graf--h4 graf-after--mixtapeEmbed">Styling &amp; Visual Design</h4><p name="e5b2" id="e5b2" class="graf graf--p graf-after--h4">Now that we have all the logic ready to ship a highly dynamic and interactive graph, we can make it look awesome with basic styling techniques. I will not go into detail here, but just check out the preview at the begining of this posts, to see what’s possible without any further tooling and skill.</p><blockquote name="e07f" id="e07f" class="graf graf--blockquote graf-after--p"><strong class="markup--strong markup--blockquote-strong">PS</strong>: Some convenient code snippets might have been dropped to keep this post as small and informative as possible. Especially talking about the “Dynamic Updates” part, please refer to the code examples for further information. They also include useful code comments to get along.</blockquote><h3 name="3df8" id="3df8" class="graf graf--h3 graf-after--blockquote">Demo</h3><p name="aca6" id="aca6" class="graf graf--p graf-after--h3">All code examples are hosted on GitHub. We provide <a href="https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/example" data-href="https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/example" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">ready-to-run examples</a> wrapped inside a <em class="markup--em markup--p-em">.html</em> file directly. Also, there is a <a href="https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/code" data-href="https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/code" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">code-folder</a> that contains the complete code in modular ES2015 syntax. Check it out: <a href="https://github.com/ninjaconcept/d3-force-directed-graph" data-href="https://github.com/ninjaconcept/d3-force-directed-graph" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">https://github.com/ninjaconcept/d3-force-directed-graph</a></p><h3 name="bfdf" id="bfdf" class="graf graf--h3 graf-after--p">Conclusion</h3><p name="35e5" id="35e5" class="graf graf--p graf-after--h3"><em class="markup--em markup--p-em">To keep it short:</em> <strong class="markup--strong markup--p-strong">Working with D3 is a pleasure. <br></strong>We had a lot of fun experimenting with the force simulation API the result is yet quite impressive.</p><p name="15ed" id="15ed" class="graf graf--p graf-after--p graf--trailing">At <a href="https://www.ninjaconcept.com" data-href="https://www.ninjaconcept.com" class="markup--anchor markup--p-anchor" rel="nofollow noopener" target="_blank">NinjaConcept</a>, we will definitely use it again soon!</p></div></div></section></div><footer class="u-paddingTop10"><div class="container u-maxWidth740"><div class="row"><div class="col u-size12of12"></div></div><div class="row"><div class="col u-size12of12 js-postTags"><div class="u-paddingBottom10"><ul class="tags tags--postTags tags--borderless"><li><a class="link u-baseColor--link"   href="https://medium.com/tag/d3?source=post" data-action-source="post">D3</a></li><li><a class="link u-baseColor--link"   href="https://medium.com/tag/javascript?source=post" data-action-source="post">JavaScript</a></li><li><a class="link u-baseColor--link"   href="https://medium.com/tag/web-development?source=post" data-action-source="post">Web Development</a></li><li><a class="link u-baseColor--link"   href="https://medium.com/tag/software-development?source=post" data-action-source="post">Software Development</a></li><li><a class="link u-baseColor--link"   href="https://medium.com/tag/data-visualization?source=post" data-action-source="post">Data Visualization</a></li></ul></div></div></div><div class="postActions js-postActionsFooter "><div class="u-flexCenter"><div class="u-flex1"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="da720c6d7811" data-is-icon-29px="true" data-is-circle="true" data-has-recommend-list="true" data-source="post_actions_footer-----da720c6d7811---------------------clap_footer" data-clap-string-singular="clap" data-clap-string-plural="claps"><div class="u-relative u-foreground"><button class="button button--large button--circle button--withChrome u-baseColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker clapButton--largePill u-relative u-foreground u-xs-paddingLeft13 u-width60 u-height60 u-accentColor--textNormal u-accentColor--buttonNormal clap-onboardingcollection"  data-action="multivote" data-action-value="da720c6d7811" data-action-type="long-press" data-action-source="post_actions_footer-----da720c6d7811---------------------clap_footer" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33" ><path d="M28.86 17.342l-3.64-6.402c-.292-.433-.712-.729-1.163-.8a1.124 1.124 0 0 0-.889.213c-.63.488-.742 1.181-.33 2.061l1.222 2.587 1.4 2.46c2.234 4.085 1.511 8.007-2.145 11.663-.26.26-.526.49-.797.707 1.42-.084 2.881-.683 4.292-2.094 3.822-3.823 3.565-7.876 2.05-10.395zm-6.252 11.075c3.352-3.35 3.998-6.775 1.978-10.469l-3.378-5.945c-.292-.432-.712-.728-1.163-.8a1.122 1.122 0 0 0-.89.213c-.63.49-.742 1.182-.33 2.061l1.72 3.638a.502.502 0 0 1-.806.568l-8.91-8.91a1.335 1.335 0 0 0-1.887 1.886l5.292 5.292a.5.5 0 0 1-.707.707l-5.292-5.292-1.492-1.492c-.503-.503-1.382-.505-1.887 0a1.337 1.337 0 0 0 0 1.886l1.493 1.492 5.292 5.292a.499.499 0 0 1-.353.854.5.5 0 0 1-.354-.147L5.642 13.96a1.338 1.338 0 0 0-1.887 0 1.338 1.338 0 0 0 0 1.887l2.23 2.228 3.322 3.324a.499.499 0 0 1-.353.853.502.502 0 0 1-.354-.146l-3.323-3.324a1.333 1.333 0 0 0-1.886 0 1.325 1.325 0 0 0-.39.943c0 .356.138.691.39.943l6.396 6.397c3.528 3.53 8.86 5.313 12.821 1.353zM12.73 9.26l5.68 5.68-.49-1.037c-.518-1.107-.426-2.13.224-2.89l-3.303-3.304a1.337 1.337 0 0 0-1.886 0 1.326 1.326 0 0 0-.39.944c0 .217.067.42.165.607zm14.787 19.184c-1.599 1.6-3.417 2.392-5.353 2.392-.349 0-.7-.03-1.058-.082a7.922 7.922 0 0 1-3.667.887c-3.049 0-6.115-1.626-8.359-3.87l-6.396-6.397A2.315 2.315 0 0 1 2 19.724a2.327 2.327 0 0 1 1.923-2.296l-.875-.875a2.339 2.339 0 0 1 0-3.3 2.33 2.33 0 0 1 1.24-.647l-.139-.139c-.91-.91-.91-2.39 0-3.3.884-.884 2.421-.882 3.301 0l.138.14a2.335 2.335 0 0 1 3.948-1.24l.093.092c.091-.423.291-.828.62-1.157a2.336 2.336 0 0 1 3.3 0l3.384 3.386a2.167 2.167 0 0 1 1.271-.173c.534.086 1.03.354 1.441.765.11-.549.415-1.034.911-1.418a2.12 2.12 0 0 1 1.661-.41c.727.117 1.385.565 1.853 1.262l3.652 6.423c1.704 2.832 2.025 7.377-2.205 11.607zM13.217.484l-1.917.882 2.37 2.837-.454-3.719zm8.487.877l-1.928-.86-.44 3.697 2.368-2.837zM16.5 3.293L15.478-.005h2.044L16.5 3.293z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--33px u-relative u-topNegative2 u-xs-top0"><svg class="svgIcon-use" width="33" height="33" ><g fill-rule="evenodd"><path d="M29.58 17.1l-3.854-6.78c-.365-.543-.876-.899-1.431-.989a1.491 1.491 0 0 0-1.16.281c-.42.327-.65.736-.7 1.207v.001l3.623 6.367c2.46 4.498 1.67 8.802-2.333 12.807-.265.265-.536.505-.81.728 1.973-.222 3.474-1.286 4.45-2.263 4.166-4.165 3.875-8.6 2.215-11.36zm-4.831.82l-3.581-6.3c-.296-.439-.725-.742-1.183-.815a1.105 1.105 0 0 0-.89.213c-.647.502-.755 1.188-.33 2.098l1.825 3.858a.601.601 0 0 1-.197.747.596.596 0 0 1-.77-.067L10.178 8.21c-.508-.506-1.393-.506-1.901 0a1.335 1.335 0 0 0-.393.95c0 .36.139.698.393.95v.001l5.61 5.61a.599.599 0 1 1-.848.847l-5.606-5.606c-.001 0-.002 0-.003-.002L5.848 9.375a1.349 1.349 0 0 0-1.902 0 1.348 1.348 0 0 0 0 1.901l1.582 1.582 5.61 5.61a.6.6 0 0 1-.848.848l-5.61-5.61c-.51-.508-1.393-.508-1.9 0a1.332 1.332 0 0 0-.394.95c0 .36.139.697.393.952l2.363 2.362c.002.001.002.002.002.003l3.52 3.52a.6.6 0 0 1-.848.847l-3.522-3.523h-.001a1.336 1.336 0 0 0-.95-.393 1.345 1.345 0 0 0-.949 2.295l6.779 6.78c3.715 3.713 9.327 5.598 13.49 1.434 3.527-3.528 4.21-7.13 2.086-11.015zM11.817 7.727c.06-.328.213-.64.466-.893.64-.64 1.755-.64 2.396 0l3.232 3.232c-.82.783-1.09 1.833-.764 2.992l-5.33-5.33z"/><path d="M13.285.48l-1.916.881 2.37 2.837z"/><path d="M21.719 1.361L19.79.501l-.44 3.697z"/><path d="M16.502 3.298L15.481 0h2.043z"/></g></svg></span></span></button><div class="clapUndo u-width60 u-round u-height32 u-absolute u-borderBox u-paddingRight5 u-transition--transform200Springu-backgroundGrayLighter js-clapUndo" style="top: 14px; padding: 2px;"><button class="button button--chromeless u-baseColor--buttonNormal button--withIcon button--withSvgIcon u-floatRight"  data-action="multivote-undo" data-action-value="da720c6d7811"><span class="svgIcon svgIcon--removeThin svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M20.13 8.11l-5.61 5.61-5.609-5.61-.801.801 5.61 5.61-5.61 5.61.801.8 5.61-5.609 5.61 5.61.8-.801-5.609-5.61 5.61-5.61" fill-rule="evenodd"/></svg></span></button></div></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft16"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton u-textColorDarker"  data-action="show-recommends" data-action-value="da720c6d7811">536 claps</button><span class="u-xs-hide"></span></span></div></div><div class="buttonSet u-flex0"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12"   href="https://medium.com/p/da720c6d7811/share/twitter" title="Share on Twitter" aria-label="Share on Twitter" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M22.053 7.54a4.474 4.474 0 0 0-3.31-1.455 4.526 4.526 0 0 0-4.526 4.524c0 .35.04.7.082 1.05a12.9 12.9 0 0 1-9.3-4.77c-.39.69-.61 1.46-.65 2.26.03 1.6.83 2.99 2.02 3.79-.72-.02-1.41-.22-2.02-.57-.01.02-.01.04 0 .08-.01 2.17 1.55 4 3.63 4.44-.39.08-.79.13-1.21.16-.28-.03-.57-.05-.81-.08.54 1.77 2.21 3.08 4.2 3.15a9.564 9.564 0 0 1-5.66 1.94c-.34-.03-.7-.06-1.05-.08 2 1.27 4.38 2.02 6.94 2.02 8.31 0 12.86-6.9 12.84-12.85.02-.24.01-.43 0-.65.89-.62 1.65-1.42 2.26-2.34-.82.38-1.69.62-2.59.72a4.37 4.37 0 0 0 1.94-2.51c-.84.53-1.81.9-2.83 1.13z"/></svg></span></span></a><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless u-xs-hide u-marginRight12"   href="https://medium.com/p/da720c6d7811/share/facebook" title="Share on Facebook" aria-label="Share on Facebook" target="_blank" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookSquare svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M23.209 5H5.792A.792.792 0 0 0 5 5.791V23.21c0 .437.354.791.792.791h9.303v-7.125H12.72v-2.968h2.375v-2.375c0-2.455 1.553-3.662 3.741-3.662 1.049 0 1.95.078 2.213.112v2.565h-1.517c-1.192 0-1.469.567-1.469 1.397v1.963h2.969l-.594 2.968h-2.375L18.11 24h5.099a.791.791 0 0 0 .791-.791V5.79a.791.791 0 0 0-.791-.79"/></svg></span></span></a><button class="button button--large button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon u-xs-show u-marginRight10"  title="Share this story on Twitter or Facebook" aria-label="Share this story on Twitter or Facebook" data-action="show-share-popover" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--share svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M20.385 8H19a.5.5 0 1 0 .011 1h1.39c.43 0 .84.168 1.14.473.31.305.48.71.48 1.142v10.77c0 .43-.17.837-.47 1.142-.3.305-.71.473-1.14.473H8.62c-.43 0-.84-.168-1.144-.473a1.603 1.603 0 0 1-.473-1.142v-10.77c0-.43.17-.837.48-1.142A1.599 1.599 0 0 1 8.62 9H10a.502.502 0 0 0 0-1H8.615c-.67 0-1.338.255-1.85.766-.51.51-.765 1.18-.765 1.85v10.77c0 .668.255 1.337.766 1.848.51.51 1.18.766 1.85.766h11.77c.668 0 1.337-.255 1.848-.766.51-.51.766-1.18.766-1.85v-10.77c0-.668-.255-1.337-.766-1.848A2.61 2.61 0 0 0 20.384 8zm-8.67-2.508L14 3.207v8.362c0 .27.224.5.5.5s.5-.23.5-.5V3.2l2.285 2.285a.49.49 0 0 0 .704-.001.511.511 0 0 0 0-.708l-3.14-3.14a.504.504 0 0 0-.71 0L11 4.776a.501.501 0 0 0 .71.706" fill-rule="evenodd"/></svg></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon"  data-action="respond" data-action-source="post_actions_footer"><span class="svgIcon svgIcon--response svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M21.27 20.058c1.89-1.826 2.754-4.17 2.754-6.674C24.024 8.21 19.67 4 14.1 4 8.53 4 4 8.21 4 13.384c0 5.175 4.53 9.385 10.1 9.385 1.007 0 2-.14 2.95-.41.285.25.592.49.918.7 1.306.87 2.716 1.31 4.19 1.31.276-.01.494-.14.6-.36a.625.625 0 0 0-.052-.65c-.61-.84-1.042-1.71-1.282-2.58a5.417 5.417 0 0 1-.154-.75zm-3.85 1.324l-.083-.28-.388.12a9.72 9.72 0 0 1-2.85.424c-4.96 0-8.99-3.706-8.99-8.262 0-4.556 4.03-8.263 8.99-8.263 4.95 0 8.77 3.71 8.77 8.27 0 2.25-.75 4.35-2.5 5.92l-.24.21v.32c0 .07 0 .19.02.37.03.29.1.6.19.92.19.7.49 1.4.89 2.08-.93-.14-1.83-.49-2.67-1.06-.34-.22-.88-.48-1.16-.74z"/></svg></span></button><button class="button button--chromeless u-baseColor--buttonNormal u-marginRight12"  data-action="scroll-to-responses">4</button><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse is-active u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="remove-from-bookmarks" data-action-value="da720c6d7811" data-action-source="post_actions_footer"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px u-marginRight4"><svg class="svgIcon-use" width="29" height="29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button><button class="button button--large button--dark button--chromeless is-touchIconBlackPulse u-baseColor--buttonDark button--withIcon button--withSvgIcon js-moreActionsButton"  title="More actions" aria-label="More actions" data-action="more-actions"><span class="svgIcon svgIcon--more svgIcon--25px"><svg class="svgIcon-use" width="25" height="25"  viewBox="-480.5 272.5 21 21"><path d="M-463 284.6c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5zm-7-.9c.9 0 1.6-.7 1.6-1.6s-.7-1.6-1.6-1.6-1.6.7-1.6 1.6.7 1.6 1.6 1.6zm0 .9c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5 2.5 1.1 2.5 2.5-1.1 2.5-2.5 2.5z"/></svg></span></button></div></div></div></div><div class="u-maxWidth740 u-paddingTop20 u-marginTop20 u-borderTopLightest container u-paddingBottom20 u-xs-paddingBottom10 js-postAttributionFooterContainer"><div class="row js-postFooterInfo"><div class="col u-size6of12 u-xs-size12of12"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardUser"><div class="u-marginLeft20 u-floatRight"><span class="followState js-followState" data-user-id="1f4a8917ae9d"><button class="button button--small u-noUserSelect button--withChrome u-baseColor--buttonNormal button--withHover button--unblock js-unblockButton"  data-action="toggle-block-user" data-action-value="1f4a8917ae9d" data-action-source="footer_card"><span class="button-label  button-defaultState">Blocked</span><span class="button-label button-hoverState">Unblock</span></button><button class="button button--primary button--small is-active u-noUserSelect button--withChrome u-accentColor--buttonNormal button--follow js-followButton"  data-action="toggle-subscribe-user" data-action-value="1f4a8917ae9d" data-action-source="footer_card-1f4a8917ae9d-------------------------follow_footer" data-subscribe-source="footer_card" data-follow-context-entity-id="da720c6d7811"><span class="button-label  button-defaultState js-buttonLabel">Follow</span><span class="button-label button-activeState">Following</span></button></span></div><div class="u-tableCell"><a class="link u-baseColor--link avatar"   href="https://medium.com/@rofrischmann?source=footer_card" title="Go to the profile of Robin Frischmann" aria-label="Go to the profile of Robin Frischmann" data-action-source="footer_card" data-user-id="1f4a8917ae9d" dir="auto"><img  src="https://cdn-images-1.medium.com/fit/c/60/60/1*kHyejmD-gSHBGZZ0OM-2Hw.jpeg" class="avatar-image avatar-image--small" alt="Go to the profile of Robin Frischmann"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"   href="https://medium.com/@rofrischmann" property="cc:attributionName" title="Go to the profile of Robin Frischmann" aria-label="Go to the profile of Robin Frischmann" rel="author cc:attributionUrl" data-user-id="1f4a8917ae9d" dir="auto">Robin Frischmann</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Frontend Architect. Freelancer. Creating Fela. Studying Psychology &amp; CS. Musician. Runner. All about Functional UI. CSS (in JS), JavaScript, ReasonML.</p></div></li></div><div class="col u-size6of12 u-xs-size12of12 u-xs-marginTop30"><li class="uiScale uiScale-ui--small uiScale-caption--regular u-block u-paddingBottom18 js-cardCollection"><div class="u-marginLeft20 u-floatRight"><button class="button button--primary button--small u-noUserSelect button--withChrome u-accentColor--buttonNormal js-relationshipButton"  data-action="toggle-follow-collection" data-action-source="----78a40cd88307----------------------follow_footer" data-collection-id="78a40cd88307"><span class="button-label  js-buttonLabel">Follow</span></button></div><div class="u-tableCell "><a class="link u-baseColor--link avatar avatar--roundedRectangle"   href="https://medium.com/ninjaconcept?source=footer_card" title="Go to NinjaConcept" aria-label="Go to NinjaConcept" data-action-source="footer_card"><img src="https://cdn-images-1.medium.com/fit/c/60/60/1*LTxus9k21IEslDwdPeFRRA.png" class="avatar-image u-size60x60" alt="NinjaConcept"></a></div><div class="u-tableCell u-verticalAlignMiddle u-breakWord u-paddingLeft15"><h3 class="ui-h3 u-fontSize18 u-lineHeightTighter u-marginBottom4"><a class="link link--primary u-accentColor--hoverTextNormal"   href="https://medium.com/ninjaconcept?source=footer_card" rel="collection" data-action-source="footer_card">NinjaConcept</a></h3><p class="ui-body u-fontSize14 u-lineHeightBaseSans u-textColorDark u-marginBottom4">Hi! We’re NinjaConcept, a web consultancy with leading-edge development skills and a passion for outstanding user experience design.</p><div class="buttonSet"></div></div></li></div></div></div><div class="js-postFooterPlacements" data-post-id="da720c6d7811" data-collection-id="78a40cd88307"></div><div class="u-padding0 u-clearfix u-backgroundGrayLightest u-print-hide supplementalPostContent js-responsesWrapper"></div><div class="supplementalPostContent js-heroPromo"></div></footer></article></main><aside class="u-marginAuto u-maxWidth1032 js-postLeftSidebar"><div class="u-foreground u-top0 u-transition--fadeOut300 u-fixed u-sm-hide js-postShareWidget"><ul><li class="u-marginVertical10"><div class="multirecommend js-actionMultirecommend u-flexCenter" data-post-id="da720c6d7811" data-is-icon-29px="true" data-has-recommend-list="true" data-source="post_share_widget-----da720c6d7811---------------------clap_sidebar"><div class="u-relative u-foreground"><button class="button button--primary button--large button--chromeless u-accentColor--buttonNormal button--withIcon button--withSvgIcon clapButton js-actionMultirecommendButton clapButton--darker"  data-action="multivote" data-action-value="da720c6d7811" data-action-type="long-press" data-action-source="post_share_widget-----da720c6d7811---------------------clap_sidebar" aria-label="Clap"><span class="button-defaultState"><span class="svgIcon svgIcon--clap svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><g fill-rule="evenodd"><path d="M13.739 1l.761 2.966L15.261 1z"/><path d="M16.815 4.776l1.84-2.551-1.43-.471z"/><path d="M10.378 2.224l1.84 2.551-.408-3.022z"/><path d="M22.382 22.622c-1.04 1.04-2.115 1.507-3.166 1.608.168-.14.332-.29.492-.45 2.885-2.886 3.456-5.982 1.69-9.211l-1.101-1.937-.955-2.02c-.315-.676-.235-1.185.245-1.556a.836.836 0 0 1 .66-.16c.342.056.66.28.879.605l2.856 5.023c1.179 1.962 1.379 5.119-1.6 8.098m-13.29-.528l-5.02-5.02a1 1 0 0 1 .707-1.701c.255 0 .512.098.707.292l2.607 2.607a.442.442 0 0 0 .624-.624L6.11 15.04l-1.75-1.75a.998.998 0 1 1 1.41-1.413l4.154 4.156a.44.44 0 0 0 .624 0 .44.44 0 0 0 0-.624l-4.152-4.153-1.172-1.171a.998.998 0 0 1 0-1.41 1.018 1.018 0 0 1 1.41 0l1.172 1.17 4.153 4.152a.437.437 0 0 0 .624 0 .442.442 0 0 0 0-.624L8.43 9.222a.988.988 0 0 1-.291-.705.99.99 0 0 1 .29-.706 1 1 0 0 1 1.412 0l6.992 6.993a.443.443 0 0 0 .71-.501l-1.35-2.856c-.315-.676-.235-1.185.246-1.557a.85.85 0 0 1 .66-.16c.342.056.659.28.879.606L20.628 15c1.573 2.876 1.067 5.545-1.544 8.156-1.396 1.397-3.144 1.966-5.063 1.652-1.713-.286-3.463-1.248-4.928-2.714zM12.99 6.976l2.562 2.562c-.497.607-.563 1.414-.155 2.284l.265.562-4.257-4.257a.98.98 0 0 1-.117-.445c0-.267.104-.517.292-.706a1.023 1.023 0 0 1 1.41 0zm8.887 2.06c-.375-.557-.902-.916-1.486-1.011a1.738 1.738 0 0 0-1.342.332c-.376.29-.61.656-.712 1.065a2.1 2.1 0 0 0-1.095-.562 1.776 1.776 0 0 0-.992.128l-2.636-2.636a1.883 1.883 0 0 0-2.658 0 1.862 1.862 0 0 0-.478.847 1.886 1.886 0 0 0-2.671-.012 1.867 1.867 0 0 0-.503.909c-.754-.754-1.992-.754-2.703-.044a1.881 1.881 0 0 0 0 2.658c-.288.12-.605.288-.864.547a1.884 1.884 0 0 0 0 2.659l.624.622a1.879 1.879 0 0 0-.91 3.16l5.019 5.02c1.595 1.594 3.515 2.645 5.408 2.959a7.16 7.16 0 0 0 1.173.098c1.026 0 1.997-.24 2.892-.7.279.04.555.065.828.065 1.53 0 2.969-.628 4.236-1.894 3.338-3.338 3.083-6.928 1.738-9.166l-2.868-5.043z"/></g></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--clapFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><g fill-rule="evenodd"><path d="M13.738 1l.762 2.966L15.262 1z"/><path d="M18.634 2.224l-1.432-.47-.408 3.022z"/><path d="M11.79 1.754l-1.431.47 1.84 2.552z"/><path d="M24.472 14.307l-3.023-5.32c-.287-.426-.689-.705-1.123-.776a1.16 1.16 0 0 0-.911.221c-.297.231-.474.515-.535.84.017.022.036.04.053.063l2.843 5.001c1.95 3.564 1.328 6.973-1.843 10.144a8.46 8.46 0 0 1-.549.501c1.205-.156 2.328-.737 3.351-1.76 3.268-3.268 3.041-6.749 1.737-8.914"/><path d="M14.58 10.887c-.156-.83.096-1.569.692-2.142L12.78 6.252c-.5-.504-1.378-.504-1.879 0-.178.18-.273.4-.329.63l4.008 4.005z"/><path d="M17.812 10.04c-.218-.323-.539-.55-.88-.606a.814.814 0 0 0-.644.153c-.176.137-.713.553-.24 1.566l1.43 3.025a.539.539 0 1 1-.868.612L9.2 7.378a.986.986 0 1 0-1.395 1.395l4.401 4.403a.538.538 0 1 1-.762.762L7.046 9.54 5.802 8.295a.99.99 0 0 0-1.396 0 .981.981 0 0 0 0 1.394l1.241 1.241 4.402 4.403a.537.537 0 0 1 0 .761.535.535 0 0 1-.762 0L4.89 11.696a.992.992 0 0 0-1.399-.003.983.983 0 0 0 0 1.395l1.855 1.854 2.763 2.765a.538.538 0 0 1-.76.761l-2.765-2.764a.982.982 0 0 0-1.395 0 .989.989 0 0 0 0 1.395l5.32 5.32c3.371 3.372 6.64 4.977 10.49 1.126C21.74 20.8 22.271 18 20.62 14.982l-2.809-4.942z"/></g></svg></span></span></button></div><span class="u-relative u-background js-actionMultirecommendCount u-marginLeft5"><button class="button button--chromeless u-baseColor--buttonNormal js-multirecommendCountButton"  data-action="show-recommends" data-action-value="da720c6d7811">536</button></span></div></li><li class="u-marginVertical10 u-marginLeft3"><button class="button button--large button--dark button--chromeless is-touchIconFadeInPulse is-active u-baseColor--buttonDark button--withIcon button--withSvgIcon button--bookmark js-bookmarkButton"  title="Bookmark this story to read later" aria-label="Bookmark this story to read later" data-action="remove-from-bookmarks" data-action-value="da720c6d7811" data-action-source="post_share_widget-----da720c6d7811---------------------bookmark_sidebar"><span class="button-defaultState"><span class="svgIcon svgIcon--bookmark svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4zM21 23l-5.91-3.955-.148-.107a.751.751 0 0 0-.884 0l-.147.107L8 23V6.615C8 5.725 8.725 5 9.615 5h9.77C20.275 5 21 5.725 21 6.615V23z" fill-rule="evenodd"/></svg></span></span><span class="button-activeState"><span class="svgIcon svgIcon--bookmarkFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M19.385 4h-9.77A2.623 2.623 0 0 0 7 6.615V23.01a1.022 1.022 0 0 0 1.595.847l5.905-4.004 5.905 4.004A1.022 1.022 0 0 0 22 23.011V6.62A2.625 2.625 0 0 0 19.385 4z" fill-rule="evenodd"/></svg></span></span></button></li><li class="u-marginVertical10 u-marginLeft3"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless"   href="https://medium.com/p/da720c6d7811/share/twitter" title="Share on Twitter" aria-label="Share on Twitter" target="_blank" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--twitterFilled svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M22.053 7.54a4.474 4.474 0 0 0-3.31-1.455 4.526 4.526 0 0 0-4.526 4.524c0 .35.04.7.082 1.05a12.9 12.9 0 0 1-9.3-4.77c-.39.69-.61 1.46-.65 2.26.03 1.6.83 2.99 2.02 3.79-.72-.02-1.41-.22-2.02-.57-.01.02-.01.04 0 .08-.01 2.17 1.55 4 3.63 4.44-.39.08-.79.13-1.21.16-.28-.03-.57-.05-.81-.08.54 1.77 2.21 3.08 4.2 3.15a9.564 9.564 0 0 1-5.66 1.94c-.34-.03-.7-.06-1.05-.08 2 1.27 4.38 2.02 6.94 2.02 8.31 0 12.86-6.9 12.84-12.85.02-.24.01-.43 0-.65.89-.62 1.65-1.42 2.26-2.34-.82.38-1.69.62-2.59.72a4.37 4.37 0 0 0 1.94-2.51c-.84.53-1.81.9-2.83 1.13z"/></svg></span></span></a></li><li class="u-marginVertical10 u-marginLeft3"><a class="button button--dark button--chromeless u-baseColor--buttonDark button--withIcon button--withSvgIcon button--dark button--chromeless"   href="https://medium.com/p/da720c6d7811/share/facebook" title="Share on Facebook" aria-label="Share on Facebook" target="_blank" data-action-source="post_share_widget"><span class="button-defaultState"><span class="svgIcon svgIcon--facebookSquare svgIcon--29px"><svg class="svgIcon-use" width="29" height="29" ><path d="M23.209 5H5.792A.792.792 0 0 0 5 5.791V23.21c0 .437.354.791.792.791h9.303v-7.125H12.72v-2.968h2.375v-2.375c0-2.455 1.553-3.662 3.741-3.662 1.049 0 1.95.078 2.213.112v2.565h-1.517c-1.192 0-1.469.567-1.469 1.397v1.963h2.969l-.594 2.968h-2.375L18.11 24h5.099a.791.791 0 0 0 .791-.791V5.79a.791.791 0 0 0-.791-.79"/></svg></span></span></a></li></ul></div></aside><style class="js-collectionStyle">
.u-accentColor--borderLight {border-color: #83848A !important;}
.u-accentColor--borderNormal {border-color: #83848A !important;}
.u-accentColor--borderDark {border-color: #717276 !important;}
.u-accentColor--iconLight .svgIcon,.u-accentColor--iconLight.svgIcon {fill: #83848A !important;}
.u-accentColor--iconNormal .svgIcon,.u-accentColor--iconNormal.svgIcon {fill: #83848A !important;}
.u-accentColor--iconDark .svgIcon,.u-accentColor--iconDark.svgIcon {fill: #717276 !important;}
.u-accentColor--textNormal {color: #717276 !important;}
.u-accentColor--hoverTextNormal:hover {color: #717276 !important;}
.u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #67686C !important;}
.u-accentColor--textDark {color: #67686C !important;}
.u-accentColor--backgroundLight {background-color: #83848A !important;}
.u-accentColor--backgroundNormal {background-color: #83848A !important;}
.u-accentColor--backgroundDark {background-color: #717276 !important;}
.u-accentColor--buttonDark {border-color: #717276 !important; color: #67686C !important;}
.u-accentColor--buttonDark:hover {border-color: #67686C !important;}
.u-accentColor--buttonDark .icon:before,.u-accentColor--buttonDark .svgIcon{color: #717276 !important; fill: #717276 !important;}
.u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: #83848A !important; color: #717276 !important;}
.u-accentColor--buttonNormal:hover {border-color: #717276 !important;}
.u-accentColor--buttonNormal .icon:before,.u-accentColor--buttonNormal .svgIcon{color: #83848A !important; fill: #83848A !important;}
.u-accentColor--buttonNormal.button--filled .icon:before,.u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonDark.button--filled,.u-accentColor--buttonDark.button--withChrome.is-active,.u-accentColor--fillWhenActive.is-active {background-color: #717276 !important; border-color: #717276 !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: #83848A !important; border-color: #83848A !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.postArticle.is-withAccentColors .markup--user,.postArticle.is-withAccentColors .markup--query {color: #717276 !important;}.u-tintBgColor {background-color: rgba(22, 24, 28, 1) !important;}.u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(22, 24, 28, 1) 0%, rgba(22, 24, 28, 0) 100%) !important;}.u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(22, 24, 28, 0) 0%, rgba(22, 24, 28, 1) 100%) !important;}
.u-tintSpectrum .u-baseColor--borderLight {border-color: #969699 !important;}
.u-tintSpectrum .u-baseColor--borderNormal {border-color: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--borderDark {border-color: #E8E6E8 !important;}
.u-tintSpectrum .u-baseColor--iconLight .svgIcon,.u-tintSpectrum .u-baseColor--iconLight.svgIcon {fill: #969699 !important;}
.u-tintSpectrum .u-baseColor--iconNormal .svgIcon,.u-tintSpectrum .u-baseColor--iconNormal.svgIcon {fill: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--iconDark .svgIcon,.u-tintSpectrum .u-baseColor--iconDark.svgIcon {fill: #E8E6E8 !important;}
.u-tintSpectrum .u-baseColor--textNormal {color: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--textDark {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--textDarker {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--backgroundLight {background-color: #969699 !important;}
.u-tintSpectrum .u-baseColor--backgroundNormal {background-color: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--backgroundDark {background-color: #E8E6E8 !important;}
.u-tintSpectrum .u-baseColor--buttonLight {border-color: #969699 !important; color: #969699 !important;}
.u-tintSpectrum .u-baseColor--buttonLight:hover {border-color: #969699 !important;}
.u-tintSpectrum .u-baseColor--buttonLight .icon:before,.u-tintSpectrum .u-baseColor--buttonLight .svgIcon {color: #969699 !important; fill: #969699 !important;}
.u-tintSpectrum .u-baseColor--buttonDark {border-color: #E8E6E8 !important; color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--buttonDark:hover {border-color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--buttonDark .icon:before,.u-tintSpectrum .u-baseColor--buttonDark .svgIcon {color: #E8E6E8 !important; fill: #E8E6E8 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal {border-color: #C0BFC2 !important; color: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal:hover {border-color: #E8E6E8 !important;}
.u-tintSpectrum .u-baseColor--buttonNormal .icon:before,.u-tintSpectrum .u-baseColor--buttonNormal .svgIcon {color: #C0BFC2 !important; fill: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--buttonDark.button--filled,.u-tintSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: #E8E6E8 !important; border-color: #E8E6E8 !important; color: rgba(22, 24, 28, 1) !important; fill: rgba(22, 24, 28, 1) !important;}
.u-tintSpectrum .u-baseColor--buttonNormal.button--filled,.u-tintSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: #C0BFC2 !important; border-color: #C0BFC2 !important; color: rgba(22, 24, 28, 1) !important; fill: rgba(22, 24, 28, 1) !important;}
.u-tintSpectrum .u-baseColor--link {color: #C0BFC2 !important;}
.u-tintSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--link.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--darken:active {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--link.link--dark {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-tintSpectrum .u-baseColor--link.link--dark.link--darken:active {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--link.link--darker {color: #FBF9FA !important;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: #969699;}
.u-tintSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: #969699;}
.u-tintSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: #969699;}
.u-tintSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: #FBF9FA !important;}
.u-tintSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: #FBF9FA !important;}
.u-tintSpectrum  .ui-h1,.u-tintSpectrum  .ui-h2,.u-tintSpectrum  .ui-h3,.u-tintSpectrum  .ui-h4,.u-tintSpectrum  .ui-brand1,.u-tintSpectrum  .ui-brand2,.u-tintSpectrum  .ui-captionStrong {color: #FBF9FA !important; fill: #FBF9FA !important;}
.u-tintSpectrum  .ui-body,.u-tintSpectrum  .ui-caps {color: #FBF9FA !important; fill: #FBF9FA !important;}
.u-tintSpectrum  .ui-summary,.u-tintSpectrum  .ui-caption {color: #969699 !important; fill: #969699 !important;}
.u-tintSpectrum .u-accentColor--borderLight {border-color: #969699 !important;}
.u-tintSpectrum .u-accentColor--borderNormal {border-color: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--borderDark {border-color: #E8E6E8 !important;}
.u-tintSpectrum .u-accentColor--iconLight .svgIcon,.u-tintSpectrum .u-accentColor--iconLight.svgIcon {fill: #969699 !important;}
.u-tintSpectrum .u-accentColor--iconNormal .svgIcon,.u-tintSpectrum .u-accentColor--iconNormal.svgIcon {fill: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--iconDark .svgIcon,.u-tintSpectrum .u-accentColor--iconDark.svgIcon {fill: #E8E6E8 !important;}
.u-tintSpectrum .u-accentColor--textNormal {color: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--hoverTextNormal:hover {color: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: #FBF9FA !important;}
.u-tintSpectrum .u-accentColor--textDark {color: #FBF9FA !important;}
.u-tintSpectrum .u-accentColor--backgroundLight {background-color: #969699 !important;}
.u-tintSpectrum .u-accentColor--backgroundNormal {background-color: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--backgroundDark {background-color: #E8E6E8 !important;}
.u-tintSpectrum .u-accentColor--buttonDark {border-color: #E8E6E8 !important; color: #FBF9FA !important;}
.u-tintSpectrum .u-accentColor--buttonDark:hover {border-color: #FBF9FA !important;}
.u-tintSpectrum .u-accentColor--buttonDark .icon:before,.u-tintSpectrum .u-accentColor--buttonDark .svgIcon{color: #E8E6E8 !important; fill: #E8E6E8 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: #C0BFC2 !important; color: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal:hover {border-color: #E8E6E8 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal .svgIcon{color: #C0BFC2 !important; fill: #C0BFC2 !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-tintSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(22, 24, 28, 1) !important; fill: rgba(22, 24, 28, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonDark.button--filled,.u-tintSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-tintSpectrum .u-accentColor--fillWhenActive.is-active {background-color: #E8E6E8 !important; border-color: #E8E6E8 !important; color: rgba(22, 24, 28, 1) !important; fill: rgba(22, 24, 28, 1) !important;}
.u-tintSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-tintSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: #C0BFC2 !important; border-color: #C0BFC2 !important; color: rgba(22, 24, 28, 1) !important; fill: rgba(22, 24, 28, 1) !important;}
.u-tintSpectrum .postArticle.is-withAccentColors .markup--user,.u-tintSpectrum .postArticle.is-withAccentColors .markup--query {color: #C0BFC2 !important;}
.u-accentColor--highlightFaint {background-color: rgba(242, 240, 241, 1) !important;}
.u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(223, 223, 228, 1) !important;}
.postArticle.is-withAccentColors .markup--quote.is-other {background-color: rgba(242, 240, 241, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(242, 240, 241, 1), rgba(242, 240, 241, 1));}
.postArticle.is-withAccentColors .markup--quote.is-me {background-color: rgba(231, 231, 234, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(231, 231, 234, 1), rgba(231, 231, 234, 1));}
.postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: rgba(223, 223, 228, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(223, 223, 228, 1), rgba(223, 223, 228, 1));}
.postArticle.is-withAccentColors .markup--quote.is-selected {background-color: rgba(223, 223, 228, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(223, 223, 228, 1), rgba(223, 223, 228, 1));}
.postArticle.is-withAccentColors .markup--highlight {background-color: rgba(223, 223, 228, 1) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(223, 223, 228, 1), rgba(223, 223, 228, 1));}.u-baseColor--iconNormal.avatar-halo {fill: rgba(0, 0, 0, 0.4980392156862745) !important;}</style><style class="js-collectionStyleConstant">.u-imageBgColor {background-color: rgba(0, 0, 0, 0.24705882352941178);}
.u-imageSpectrum .u-baseColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconLight .svgIcon,.u-imageSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--iconNormal .svgIcon,.u-imageSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--iconDark .svgIcon,.u-imageSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--textDarker {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-baseColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important; color: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-baseColor--buttonLight .icon:before,.u-imageSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(255, 255, 255, 0.8) !important; fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-baseColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonDark .icon:before,.u-imageSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal .icon:before,.u-imageSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--buttonDark.button--filled,.u-imageSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--buttonNormal.button--filled,.u-imageSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-baseColor--link {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-imageSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--link.link--darker {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(255, 255, 255, 0.8);}
.u-imageSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-h1,.u-imageSpectrum  .ui-h2,.u-imageSpectrum  .ui-h3,.u-imageSpectrum  .ui-h4,.u-imageSpectrum  .ui-brand1,.u-imageSpectrum  .ui-brand2,.u-imageSpectrum  .ui-captionStrong {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-body,.u-imageSpectrum  .ui-caps {color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum  .ui-summary,.u-imageSpectrum  .ui-caption {color: rgba(255, 255, 255, 0.8) !important; fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-accentColor--borderLight {border-color: rgba(255, 255, 255, 0.6980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderNormal {border-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--borderDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconLight .svgIcon,.u-imageSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(255, 255, 255, 0.8) !important;}
.u-imageSpectrum .u-accentColor--iconNormal .svgIcon,.u-imageSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--iconDark .svgIcon,.u-imageSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textNormal {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--textDark {color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--backgroundLight {background-color: rgba(255, 255, 255, 0.8980392156862745) !important;}
.u-imageSpectrum .u-accentColor--backgroundNormal {background-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--backgroundDark {background-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark {border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonDark .icon:before,.u-imageSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: rgba(255, 255, 255, 0.8980392156862745) !important; color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(255, 255, 255, 0.9490196078431372) !important; fill: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-imageSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonDark.button--filled,.u-imageSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-imageSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(255, 255, 255, 1) !important; border-color: rgba(255, 255, 255, 1) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-imageSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: rgba(255, 255, 255, 0.9490196078431372) !important; border-color: rgba(255, 255, 255, 0.9490196078431372) !important; color: rgba(0, 0, 0, 0.24705882352941178) !important; fill: rgba(0, 0, 0, 0.24705882352941178) !important;}
.u-imageSpectrum .postArticle.is-withAccentColors .markup--user,.u-imageSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(255, 255, 255, 0.9490196078431372) !important;}
.u-imageSpectrum .u-accentColor--highlightFaint {background-color: rgba(255, 255, 255, 0.2) !important;}
.u-imageSpectrum .u-accentColor--highlightStrong.is-active .svgIcon {fill: rgba(255, 255, 255, 0.6) !important;}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: rgba(255, 255, 255, 0.2) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-other {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.2));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: rgba(255, 255, 255, 0.4) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-me {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.4), rgba(255, 255, 255, 0.4));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-targeted {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--quote.is-selected {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}
.postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: rgba(255, 255, 255, 0.6) !important;}
body.is-withMagicUnderlines .postArticle.is-withAccentColors .u-imageSpectrum .markup--highlight {background-color: transparent !important; background-image: linear-gradient(to bottom, rgba(255, 255, 255, 0.6), rgba(255, 255, 255, 0.6));}.u-resetSpectrum .u-tintBgColor {background-color: rgba(255, 255, 255, 1) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeLeft:before {background-image: linear-gradient(to right, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%) !important;}.u-resetSpectrum .u-tintBgColor .u-fadeRight:after {background-image: linear-gradient(to right, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 1) 100%) !important;}
.u-resetSpectrum .u-baseColor--borderLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--borderDark {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--iconLight .svgIcon,.u-resetSpectrum .u-baseColor--iconLight.svgIcon {fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconNormal .svgIcon,.u-resetSpectrum .u-baseColor--iconNormal.svgIcon {fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--iconDark .svgIcon,.u-resetSpectrum .u-baseColor--iconDark.svgIcon {fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textNormal {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--textNormal.u-baseColor--textDarken:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textDark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--textDarker {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--backgroundLight {background-color: rgba(0, 0, 0, 0.09803921568627451) !important;}
.u-resetSpectrum .u-baseColor--backgroundNormal {background-color: rgba(0, 0, 0, 0.2) !important;}
.u-resetSpectrum .u-baseColor--backgroundDark {background-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight {border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight:hover {border-color: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonLight .icon:before,.u-resetSpectrum .u-baseColor--buttonLight .svgIcon {color: rgba(0, 0, 0, 0.2980392156862745) !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark {border-color: rgba(0, 0, 0, 0.6) !important; color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonDark:hover {border-color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--buttonDark .icon:before,.u-resetSpectrum .u-baseColor--buttonDark .svgIcon {color: rgba(0, 0, 0, 0.6) !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal {border-color: rgba(0, 0, 0, 0.4980392156862745) !important; color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal:hover {border-color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal .icon:before,.u-resetSpectrum .u-baseColor--buttonNormal .svgIcon {color: rgba(0, 0, 0, 0.4980392156862745) !important; fill: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--buttonDark.button--filled,.u-resetSpectrum .u-baseColor--buttonDark.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2980392156862745) !important; border-color: rgba(0, 0, 0, 0.2980392156862745) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--buttonNormal.button--filled,.u-resetSpectrum .u-baseColor--buttonNormal.button--withChrome.is-active {background-color: rgba(0, 0, 0, 0.2) !important; border-color: rgba(0, 0, 0, 0.2) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-baseColor--link {color: rgba(0, 0, 0, 0.4980392156862745) !important;}
.u-resetSpectrum .u-baseColor--link.link--darkenOnHover:hover {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--darken:active {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark {color: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:hover,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:focus,.u-resetSpectrum .u-baseColor--link.link--dark.link--darken:active {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--link.link--darker {color: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-webkit-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal ::-moz-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .u-baseColor--placeholderNormal :-ms-input-placeholder {color: rgba(0, 0, 0, 0.2980392156862745);}
.u-resetSpectrum .svgIcon--logoWordmark {stroke: none !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum .svgIcon--logoMonogram {stroke: none !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum  .ui-h1,.u-resetSpectrum  .ui-h2,.u-resetSpectrum  .ui-h3,.u-resetSpectrum  .ui-h4,.u-resetSpectrum  .ui-brand1,.u-resetSpectrum  .ui-brand2,.u-resetSpectrum  .ui-captionStrong {color: rgba(0, 0, 0, 0.8) !important; fill: rgba(0, 0, 0, 0.8) !important;}
.u-resetSpectrum  .ui-body,.u-resetSpectrum  .ui-caps {color: rgba(0, 0, 0, 0.6) !important; fill: rgba(0, 0, 0, 0.6) !important;}
.u-resetSpectrum  .ui-summary,.u-resetSpectrum  .ui-caption {color: rgba(0, 0, 0, 0.2980392156862745) !important; fill: rgba(0, 0, 0, 0.2980392156862745) !important;}
.u-resetSpectrum .u-accentColor--borderLight {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderNormal {border-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--borderDark {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconLight .svgIcon,.u-resetSpectrum .u-accentColor--iconLight.svgIcon {fill: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--iconNormal .svgIcon,.u-resetSpectrum .u-accentColor--iconNormal.svgIcon {fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--iconDark .svgIcon,.u-resetSpectrum .u-accentColor--iconDark.svgIcon {fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--hoverTextNormal:hover {color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--textNormal.u-accentColor--textDarken:hover {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--textDark {color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundLight {background-color: rgba(2, 184, 117, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundNormal {background-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--backgroundDark {background-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark {border-color: rgba(0, 171, 107, 1) !important; color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark:hover {border-color: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark .icon:before,.u-resetSpectrum .u-accentColor--buttonDark .svgIcon{color: rgba(28, 153, 99, 1) !important; fill: rgba(28, 153, 99, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal:not(.clapButton--largePill) {border-color: rgba(2, 184, 117, 1) !important; color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal:hover {border-color: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal .svgIcon{color: rgba(0, 171, 107, 1) !important; fill: rgba(0, 171, 107, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .icon:before,.u-resetSpectrum .u-accentColor--buttonNormal.button--filled .svgIcon{color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonDark.button--filled,.u-resetSpectrum .u-accentColor--buttonDark.button--withChrome.is-active,.u-resetSpectrum .u-accentColor--fillWhenActive.is-active {background-color: rgba(28, 153, 99, 1) !important; border-color: rgba(28, 153, 99, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .u-accentColor--buttonNormal.button--filled:not(.clapButton--largePill),.u-resetSpectrum .u-accentColor--buttonNormal.button--withChrome.is-active:not(.clapButton--largePill) {background-color: rgba(0, 171, 107, 1) !important; border-color: rgba(0, 171, 107, 1) !important; color: rgba(255, 255, 255, 1) !important; fill: rgba(255, 255, 255, 1) !important;}
.u-resetSpectrum .postArticle.is-withAccentColors .markup--user,.u-resetSpectrum .postArticle.is-withAccentColors .markup--query {color: rgba(0, 171, 107, 1) !important;}</style></div></div></div><div class="loadingBar"></div><script>// <![CDATA[
window["obvInit"] = function (opt_embedded) {window["obvInit"]["embedded"] = opt_embedded; window["obvInit"]["ready"] = true;}
// ]]></script><script>// <![CDATA[
var GLOBALS = {"audioUrl":"https://d1fcbxp97j4nb2.cloudfront.net","baseUrl":"https://medium.com","buildLabel":"36997-a1784da","currentUser":{"userId":"4b3a2a9faadc","username":"gwpl","name":"Grzegorz Wierzowiecki","email":"gwpublic@wp.pl","imageId":"1*dmbNkD5D-u45r44go_cf0g.png","twitterScreenName":"GWierzowiecki","createdAt":1439935642489,"lastPostCreatedAt":1533790651242,"isVerified":true,"subscriberEmail":"","hasPastMemberships":false,"isEnrolledInHightower":false,"isEligibleForHightower":true,"hightowerLastLockedAt":0,"isWriterProgramEnrolled":true,"isWriterProgramInvited":true,"isWriterProgramOptedOut":false,"writerProgramVersion":4,"writerProgramEnrolledAt":1551476598864,"friendLinkOnboarding":0,"hasAdditionalUnlocks":false,"hasApiAccess":false,"isQuarantined":false,"writerProgramDistributionSettingOptedIn":false},"currentUserHasUnverifiedEmail":false,"isAuthenticated":true,"isCurrentUserVerified":true,"language":"en-gb","miroUrl":"https://cdn-images-1.medium.com","moduleUrls":{"base":"https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.pMGS2qxCm3kUTnzA7qtQ0Q.js","common-async":"https://cdn-static-1.medium.com/_/fp/gen-js/main-common-async.bundle.3A7GeuXInDHd8rVnpEzmJw.js","hightower":"https://cdn-static-1.medium.com/_/fp/gen-js/main-hightower.bundle.HoekZZH5viuxEBLi19brpQ.js","home-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-home-screens.bundle.QxDhRF1cubXSC1QuaWa26Q.js","misc-screens":"https://cdn-static-1.medium.com/_/fp/gen-js/main-misc-screens.bundle.8cRxc-Ly-xHH2-eRDnCFtg.js","notes":"https://cdn-static-1.medium.com/_/fp/gen-js/main-notes.bundle.rD8hVOjp0dzdfkyiO-vf3g.js","payments":"https://cdn-static-1.medium.com/_/fp/gen-js/main-payments.bundle.Ttx9QdJcJnBcwIW2IEImoQ.js","posters":"https://cdn-static-1.medium.com/_/fp/gen-js/main-posters.bundle.gSLqEw6VpTxs8EXGfSZKNQ.js","power-readers":"https://cdn-static-1.medium.com/_/fp/gen-js/main-power-readers.bundle.YUoCignCLO1S5X0P6kZDaw.js","pubs":"https://cdn-static-1.medium.com/_/fp/gen-js/main-pubs.bundle.n75cj_-w-tR1W_vSnCSHEA.js","stats":"https://cdn-static-1.medium.com/_/fp/gen-js/main-stats.bundle.zo_VYsh7JJcO4FNbhqWV3A.js"},"previewConfig":{"weightThreshold":1,"weightImageParagraph":0.51,"weightIframeParagraph":0.8,"weightTextParagraph":0.08,"weightEmptyParagraph":0,"weightP":0.003,"weightH":0.005,"weightBq":0.003,"minPTextLength":60,"truncateBoundaryChars":20,"detectTitle":true,"detectTitleLevThreshold":0.15},"productName":"Medium","supportsEdit":true,"termsUrl":"//medium.com/policy/9db0094a1e0f","textshotHost":"textshot.medium.com","transactionId":"1553293749799:d626ba6cd50c","useragent":{"browser":"chrome","family":"chrome","os":"","version":73,"supportsDesktopEdit":true,"supportsInteract":true,"supportsView":true,"isMobile":false,"isTablet":false,"isNative":false,"supportsFileAPI":true,"isTier1":true,"clientVersion":"","unknownParagraphsBad":false,"clientChannel":"","supportsRealScrollEvents":true,"supportsVhUnits":true,"ruinsViewportSections":false,"supportsHtml5Video":true,"supportsMagicUnderlines":true,"isWebView":false,"isFacebookWebView":false,"supportsProgressiveMedia":true,"supportsPromotedPosts":true,"isBot":false,"isNativeIphone":false,"supportsCssVariables":true,"supportsVideoSections":true,"emojiSupportLevel":1,"isSearchBot":false,"isSyndicationBot":false,"isNativeAndroid":false,"supportsScrollableMetabar":true},"variants":{"allow_access":true,"allow_signup":true,"allow_test_auth":"disallow","signin_services":"twitter,facebook,google,email,google-fastidv,google-one-tap","signup_services":"twitter,facebook,google,email,google-fastidv,google-one-tap","google_sign_in_android":true,"reengagement_notification_duration":3,"browsable_stream_config_bucket":"curated-topics","enable_dedicated_series_tab_api_ios":true,"enable_post_import":true,"available_monthly_plan":"60e220181034","available_annual_plan":"2c754bcc2995","disable_ios_resume_reading_toast":true,"is_not_medium_subscriber":true,"glyph_font_set":"m2","enable_branding":true,"enable_branding_fonts":true,"enable_2019_march_meter_limit_update":true,"max_premium_content_per_user_under_metering":3,"enable_automated_mission_control_triggers":true,"enable_slot_machine_ui":true,"enable_lite_profile":true,"enable_marketing_emails":true,"enable_parsely":true,"enable_branch_io":true,"enable_ios_post_stats":true,"enable_lite_topics":true,"enable_lite_stories":true,"redis_read_write_splitting":true,"enable_tipalti_onboarding":true,"enable_annual_renewal_reminder_email":true,"enable_janky_spam_rules":"users,posts","enable_new_collaborative_filtering_data":true,"android_rating_prompt_stories_read_threshold":2,"enable_smart_meter_with_incentive":true,"stripe_v3":true,"enable_google_one_tap":true,"enable_email_sign_in_captcha":true,"enable_rito_sequence_post_recirc_query":true,"enable_primary_topic_for_mobile":true,"enable_prereg_post_post_recs":true,"store_moc_depth_in_session":true,"enable_rito_sequence_post_handler":true,"enable_march_meter_email_test":true,"enable_quarantine_rules":true,"enable_lite_privacy_banner":true},"xsrfToken":"phLAyWLdfkAz","iosAppId":"828256236","supportEmail":"yourfriends@medium.com","fp":{"/icons/monogram-mask.svg":"https://cdn-static-1.medium.com/_/fp/icons/monogram-mask.KPLCSFEZviQN0jQ7veN2RQ.svg","/icons/favicon-dev-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-dev-editor.YKKRxBO8EMvIqhyCwIiJeQ.ico","/icons/favicon-hatch-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-hatch-editor.BuEyHIqlyh2s_XEk4Rl32Q.ico","/icons/favicon-medium-editor.ico":"https://cdn-static-1.medium.com/_/fp/icons/favicon-medium-editor.PiakrZWB7Yb80quUVQWM6g.ico"},"authBaseUrl":"https://medium.com","imageUploadSizeMb":25,"isAuthDomainRequest":true,"algoliaApiEndpoint":"https://MQ57UUUQZ2-dsn.algolia.net","algoliaAppId":"MQ57UUUQZ2","algoliaSearchOnlyApiKey":"394474ced050e3911ae2249ecc774921","iosAppStoreUrl":"https://itunes.apple.com/app/medium-everyones-stories/id828256236?pt=698524&mt=8","iosAppLinkBaseUrl":"medium:","algoliaIndexPrefix":"medium_","androidPlayStoreUrl":"https://play.google.com/store/apps/details?id=com.medium.reader","googleClientId":"216296035834-k1k6qe060s2tp2a2jam4ljdcms00sttg.apps.googleusercontent.com","androidPackage":"com.medium.reader","androidPlayStoreMarketScheme":"market://details?id=com.medium.reader","googleAuthUri":"https://accounts.google.com/o/oauth2/auth","androidScheme":"medium","layoutData":{"useDynamicScripts":false,"googleAnalyticsTrackingCode":"UA-24232453-2","jsShivUrl":"https://cdn-static-1.medium.com/_/fp/js/shiv.RI2ePTZ5gFmMgLzG5bEVAA.js","useDynamicCss":false,"faviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium.3Y6xpZ-0FSdWDnPM3hSBIA.ico","faviconImageId":"1*8I-HPL0bfoIzGied-dzOvA.png","fontSets":[{"id":8,"url":"https://glyph.medium.com/css/e/sr/latin/e/ssr/latin/e/ssb/latin/m2.css"},{"id":11,"url":"https://glyph.medium.com/css/m2.css"},{"id":9,"url":"https://glyph.medium.com/css/mkt.css"}],"editorFaviconUrl":"https://cdn-static-1.medium.com/_/fp/icons/favicon-rebrand-medium-editor.3Y6xpZ-0FSdWDnPM3hSBIA.ico","glyphUrl":"https://glyph.medium.com"},"authBaseUrlRev":"moc.muidem//:sptth","isDnt":false,"stripePublishableKey":"pk_live_7FReX44VnNIInZwrIIx6ghjl","archiveUploadSizeMb":100,"paymentData":{"currencies":{"1":{"label":"US Dollar","external":"usd"}},"countries":{"1":{"label":"United States of America","external":"US"}},"accountTypes":{"1":{"label":"Individual","external":"individual"},"2":{"label":"Company","external":"company"}}},"previewConfig2":{"weightThreshold":1,"weightImageParagraph":0.05,"raiseImage":true,"enforceHeaderHierarchy":true,"isImageInsetRight":true},"isAmp":false,"iosScheme":"medium","isSwBoot":false,"lightstep":{"accessToken":"ce5be895bef60919541332990ac9fef2","carrier":"{\"ot-tracer-spanid\":\"1813359d51433b47\",\"ot-tracer-traceid\":\"07b100793617fa95\",\"ot-tracer-sampled\":\"true\"}","host":"collector-medium.lightstep.com"},"facebook":{"key":"542599432471018","namespace":"medium-com","scope":{"default":["public_profile","email"],"connect":["public_profile","email"],"login":["public_profile","email"],"share":["public_profile","email"]}},"editorsPicksTopicId":"3985d2a191c5","popularOnMediumTopicId":"9d34e48ecf94","memberContentTopicId":"13d7efd82fb2","audioContentTopicId":"3792abbd134","brandedSequenceId":"7d337ddf1941","isDoNotAuth":false,"goldfinchUrl":"https://goldfinch.medium.com","buggle":{"url":"https://buggle.medium.com","videoUrl":"https://cdn-videos-1.medium.com","audioUrl":"https://cdn-audio-1.medium.com"},"referrerType":5,"isMeteredOut":true,"meterConfig":{"maxUnlockCount":5,"windowLength":"MONTHLY"},"partnerProgramEmail":"partnerprogram@medium.com","userResearchPrompts":[{"promptId":"li_post_page","type":0,"url":"www.calendly.com"},{"promptId":"li_home_page","type":1,"url":"mediumuserfeedback.typeform.com/to/GcFjEO"},{"promptId":"li_profile_page","type":2,"url":"www.calendly.com"}],"recaptchaKey":"6LdAokEUAAAAAC7seICd4vtC8chDb3jIXDQulyUJ","signinWallCustomDomainCollectionIds":["3a8144eabfe3","336d898217ee","61061eb0c96b","138adf9c44c","819cc2aaeee0"],"countryCode":"PL","bypassMeter":false,"branchKey":"key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm","paypal":{"clientMode":"production","oneYearGift":{"name":"Medium Membership (1 Year, Digital Gift Code)","description":"Unlimited access to the best and brightest stories on Medium. Gift codes can be redeemed at medium.com/redeem.","price":"50.00","currency":"USD","sku":"membership-gift-1-yr"}},"collectionConfig":{"mediumOwnedAndOperatedCollectionIds":["544c7006046e // Human Parts","bcc38c8f6edf // Matter","444d13b52878 // OneZero"]}}
// ]]></script><script charset="UTF-8" src="https://cdn-static-1.medium.com/_/fp/gen-js/main-base.bundle.pMGS2qxCm3kUTnzA7qtQ0Q.js" async></script><script>// <![CDATA[
window["obvInit"]({"value":{"id":"da720c6d7811","versionId":"ee745a69447","creatorId":"1f4a8917ae9d","creator":{"userId":"1f4a8917ae9d","name":"Robin Frischmann","username":"rofrischmann","createdAt":1434653103908,"imageId":"1*kHyejmD-gSHBGZZ0OM-2Hw.jpeg","backgroundImageId":"1*ywQ7QMQtkTguUHnmTYrJ5Q.jpeg","bio":"Frontend Architect. Freelancer. Creating Fela. Studying Psychology & CS. Musician. Runner. All about Functional UI. CSS (in JS), JavaScript, ReasonML.","twitterScreenName":"rofrischmann","socialStats":{"userId":"1f4a8917ae9d","usersFollowedCount":86,"usersFollowedByCount":219,"type":"SocialStats"},"social":{"userId":"4b3a2a9faadc","targetUserId":"1f4a8917ae9d","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"},"facebookAccountId":"1712356718775854","allowNotes":1,"mediumMemberAt":0,"isNsfw":false,"isWriterProgramEnrolled":true,"isQuarantined":false,"type":"User"},"homeCollection":{"id":"78a40cd88307","name":"NinjaConcept","slug":"ninjaconcept","tags":["WEB DEVELOPMENT","SOFTWARE DESIGN","USER EXPERIENCE DESIGN","BACKEND DEVELOPMENT","FUNCTIONAL PROGRAMMING"],"creatorId":"1f4a8917ae9d","description":"Hi! We’re NinjaConcept, a web consultancy with leading-edge development skills and a passion for outstanding user experience design.","shortDescription":"Hi!","image":{"imageId":"1*LTxus9k21IEslDwdPeFRRA.png","filter":"","backgroundSize":"","originalWidth":649,"originalHeight":649,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":65,"activeAt":1489656964116},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*Kde-D1MU1QETeIfHU602aw.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":200,"strategy":"resample","height":0,"width":0},"twitterUsername":"ninjaconcept","facebookPageName":"NinjaConcept","publicEmail":"contact@ninjaconcept.com","sections":[{"type":2,"collectionHeaderMetadata":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}}],"tintColor":"#FF16181C","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF83848A","point":0},{"color":"#FF7A7B80","point":0.1},{"color":"#FF717276","point":0.2},{"color":"#FF67686C","point":0.3},{"color":"#FF5D5E61","point":0.4},{"color":"#FF535457","point":0.5},{"color":"#FF494A4C","point":0.6},{"color":"#FF3E3F40","point":0.7},{"color":"#FF333335","point":0.8},{"color":"#FF272728","point":0.9},{"color":"#FF1A1A1B","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF16181C","point":0},{"color":"#FF35373B","point":0.1},{"color":"#FF505155","point":0.2},{"color":"#FF696A6D","point":0.3},{"color":"#FF808084","point":0.4},{"color":"#FF969699","point":0.5},{"color":"#FFACABAE","point":0.6},{"color":"#FFC0BFC2","point":0.7},{"color":"#FFD4D3D5","point":0.8},{"color":"#FFE8E6E8","point":0.9},{"color":"#FFFBF9FA","point":1}],"backgroundColor":"#FF16181C"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF4F2F3","point":0},{"color":"#FFF2F0F1","point":0.1},{"color":"#FFF0EEF0","point":0.2},{"color":"#FFEEECEE","point":0.3},{"color":"#FFECEAED","point":0.4},{"color":"#FFEAE9EB","point":0.5},{"color":"#FFE7E7EA","point":0.6},{"color":"#FFE5E5E8","point":0.7},{"color":"#FFE3E3E7","point":0.8},{"color":"#FFE1E1E5","point":0.9},{"color":"#FFDFDFE4","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Development","tagSlug":"software-development","url":"https://medium.com/ninjaconcept/tagged/software-development","source":"tagSlug"},{"type":1,"title":"Design","tagSlug":"user-experience-design","url":"https://medium.com/ninjaconcept/tagged/user-experience-design","source":"tagSlug"},{"type":6,"title":"About","url":"https://medium.com/ninjaconcept/about"},{"type":3,"title":"Website","url":"https://www.ninjaconcept.com"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4},"type":"Collection"},"homeCollectionId":"78a40cd88307","title":"Interactive & Dynamic Force-Directed Graphs with D3","detectedLanguage":"en","latestVersion":"ee745a69447","latestPublishedVersion":"ee745a69447","hasUnpublishedEdits":false,"latestRev":3490,"createdAt":1484570393043,"updatedAt":1537177527436,"acceptedAt":0,"firstPublishedAt":1486974400912,"latestPublishedAt":1537177527436,"vote":false,"experimentalCss":"","displayAuthor":"","content":{"subtitle":"A guided tour through D3 4.0 force simulations","bodyModel":{"paragraphs":[{"name":"1cc1","type":3,"text":"Interactive & Dynamic Force-Directed Graphs with D3","markups":[]},{"name":"d6f5","type":13,"text":"A guided tour through D3 version 4.0 force simulations with dynamic data and user interaction","markups":[]},{"name":"e30b","type":4,"text":"Preview of the final product with a custom “space” design (replaced the real data with mocks)","markups":[],"layout":3,"metadata":{"id":"1*6RDl7zNmvg_4QSHVRrmYCw.png","originalWidth":2453,"originalHeight":1053}},{"name":"b251","type":1,"text":"Many companies have a tremendous amount of data which is not just hard to maintain and manage, but also hard to understand and analyse. Here, data visualisation should find a remedy. The main goal is to communicate information clearly and efficiently which improves the overall experience.","markups":[]},{"name":"8561","type":1,"text":"In this post, I want to explain how we, at NinjaConcept, used D3 to create an interactive and dynamic force-directed graph which helped us to display nested data with complex relations in a simple natural way.","markups":[{"type":3,"start":43,"end":55,"href":"https://www.ninjaconcept.com","title":"","rel":"","anchorType":0}]},{"name":"6f7b","type":3,"text":"Background","markups":[]},{"name":"1b16","type":1,"text":"Before we start, I want to explain which requirements we had to fulfill. This might help to understand our decisions better.","markups":[]},{"name":"0007","type":13,"text":"Requirements","markups":[]},{"name":"dba2","type":1,"text":"First of all, the data we had to display was composed of both specially prepared data as well as extractions of the companies long-standing knowledge management system(s).\nThe hardware requirement was very interesting, too. The graph would have to be build primarily for the new Microsoft Surface Hub, which had a lot of fun playing with. Though, the exiting part was to create a touch-focused interactive app that leverages the advantage of the multi-touch device.","markups":[{"type":3,"start":279,"end":300,"href":"https://www.microsoft.com/microsoft-surface-hub/","title":"","rel":"","anchorType":0}]},{"name":"ffdf","type":6,"text":"Fun fact: We had been able to track up to 13 different fingers at once! Great work, Microsoft.","markups":[]},{"name":"3c06","type":13,"text":"Why D3?","markups":[]},{"name":"7339","type":1,"text":"As soon as we knew all of the customers requirements, we had to think about which technologies we would use to build the application. After several research and comparison, we chose to use React as our primary user interface library which we would later integrate with D3 and a Meteor backend to serve all the data and other services.","markups":[]},{"name":"e041","type":1,"text":"We chose D3 not just because of its popularity and bulletproof core, but especially because of the amazing physical tools provided by d3-force.","markups":[{"type":3,"start":134,"end":142,"href":"https://github.com/d3/d3-force","title":"","rel":"","anchorType":0}]},{"name":"d5a3","type":3,"text":"Data","markups":[]},{"name":"b88d","type":1,"text":"D3 is all about (complex) data visualisation. Our goal was to build a force-directed graph similar to this example by D3’s creator Mike Bostock himself.\nIt is based on d3-force and uses the forceSimulation API.","markups":[{"type":3,"start":102,"end":114,"href":"https://bl.ocks.org/mbostock/4062045","title":"","rel":"","anchorType":0},{"type":3,"start":131,"end":143,"href":"https://bost.ocks.org/mike/","title":"","rel":"","anchorType":0},{"type":3,"start":190,"end":209,"href":"https://github.com/d3/d3-force#simulation","title":"","rel":"","anchorType":0}]},{"name":"90a5","type":13,"text":"Nodes","markups":[]},{"name":"2f5f","type":1,"text":"Every simulation effectively takes a list of data objects and uses them as nodes. Think of those nodes as the data bubbles in the above mentioned example.","markups":[{"type":1,"start":75,"end":80}]},{"name":"32a2","type":1,"text":"For simplicity, we are using a very basic example set of nodes to focus on the implementation. We are using the following list of animals and animal species, where the animals are sub-nodes of the species.","markups":[]},{"name":"a650","type":8,"text":"[ \n  { id: \"mammal\", group: 0, label: \"Mammals\", level: 1 },\n  { id: \"dog\"   , group: 0, label: \"Dogs\"   , level: 2 },\n  { id: \"cat\"   , group: 0, label: \"Cats\"   , level: 2 },\n  { id: \"fox\"   , group: 0, label: \"Foxes\"  , level: 2 }, \n  { id: \"elk\"   , group: 0, label: \"Elk\"    , level: 2 },\n  { id: \"insect\", group: 1, label: \"Insects\", level: 1 },\n  { id: \"ant\"   , group: 1, label: \"Ants\"   , level: 2 },\n  { id: \"bee\"   , group: 1, label: \"Bees\"   , level: 2 },  \n  { id: \"fish\"  , group: 2, label: \"Fish\"   , level: 1 },\n  { id: \"carp\"  , group: 2, label: \"Carp\"   , level: 2 },\n  { id: \"pike\"  , group: 2, label: \"Pikes\"  , level: 2 } \n]","markups":[]},{"name":"da74","type":1,"text":"The key is a unique node id and the level references the level of nesting. The group references one of these groups:","markups":[]},{"name":"f4a4","type":8,"text":"{\n  0: \"mammal\",\n  1: \"insect\",\n  2: \"fish\"\n}","markups":[]},{"name":"9319","type":13,"text":"Links","markups":[]},{"name":"c7fa","type":1,"text":"Another important feature of force simulations are links. They connect nodes to display (complex) relations. Every link needs to have at least a source and a target. Both are ids referencing one of the above nodes.","markups":[{"type":1,"start":98,"end":107},{"type":1,"start":145,"end":151},{"type":1,"start":158,"end":164}]},{"name":"3676","type":1,"text":"Next to special links, every sub-node (with level \x3e 1) is at least linked to its parent node. We are using the following links:","markups":[{"type":2,"start":38,"end":54}]},{"name":"bfcd","type":8,"text":"[\n  { target: \"mammal\", source: \"dog\" , strength: 0.7 },\n  { target: \"mammal\", source: \"cat\" , strength: 0.7 },\n  { target: \"mammal\", source: \"fox\" , strength: 0.7 },\n  { target: \"mammal\", source: \"elk\" , strength: 0.7 },\n  { target: \"insect\", source: \"ant\" , strength: 0.7 },\n  { target: \"insect\", source: \"bee\" , strength: 0.7 },\n  { target: \"fish\"  , source: \"carp\", strength: 0.7 },\n  { target: \"fish\"  , source: \"pike\", strength: 0.7 },","markups":[]},{"name":"b141","type":8,"text":"  { target: \"cat\"   , source: \"elk\" , strength: 0.1 },\n  { target: \"carp\"  , source: \"ant\" , strength: 0.1 },\n  { target: \"elk\"   , source: \"bee\" , strength: 0.1 },\n  { target: \"dog\"   , source: \"cat\" , strength: 0.1 },\n  { target: \"fox\"   , source: \"ant\" , strength: 0.1 },\n  { target: \"pike\"  , source: \"dog\" , strength: 0.1 }\n]","markups":[]},{"name":"e25e","type":3,"text":"Implementation","markups":[]},{"name":"be72","type":1,"text":"Before we finally start with the implementation, let me describe how we went on. First of all we tried to simply display all the nodes in colored groups. Then we’d add relations (links) and user interaction through touch events. Afterwards we made the whole graph dynamic by default which means adding and removing nodes and links depending on the current selection. Finally, we applied some styling to make the whole graph not only feel great, but actually look great as well.","markups":[]},{"name":"b4b4","type":6,"text":"Disclaimer: The code showed below is written in ECMAScript 2015, although the linked Gists (Bl.ocks) are written in good-old ES5 for compatibility reasons. I will add a full demo including both ES5 and ECMAScript 2015 versions at the end. Cursive words refer to variables or parts of the code itself.","markups":[{"type":1,"start":0,"end":10}]},{"name":"7e2a","type":13,"text":"Displaying Nodes","markups":[]},{"name":"7121","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*95tYB_xTNmj9Jy3cQnwt6Q.png","originalWidth":1438,"originalHeight":808}},{"name":"a9aa","type":1,"text":"To start simple, first of all we need to somehow display our data in a force-directed graph using D3. Luckily, this is really straight-forward as we can just take the responsible code snippets from the above mentioned example.","markups":[]},{"name":"4111","type":1,"text":"Let’s start by selecting a svg element with D3, which will function as a canvas for our graph later. We then set its width and height to fill the window.","markups":[{"type":2,"start":117,"end":122},{"type":2,"start":127,"end":133}]},{"name":"4281","type":8,"text":"const width = window.innerWidth\nconst height = window.innerHeight","markups":[]},{"name":"5720","type":8,"text":"const svg = d3.select('svg')\n  .attr('width', width)\n  .attr('height', height)","markups":[]},{"name":"7e32","type":1,"text":"Now that we have our container ready, we can create forceSimulation instance. We also add two different forces. The first one, charge is global force that affects every node. It simulates electrostatic effects, which makes the graph feel organic and natural as the nodes affect each other. If we’d use a positive strength, it’d simulate a gravitational pull.\nThe second one, center, simply translates all nodes to visually move them into the center of the svg element.","markups":[{"type":1,"start":127,"end":134},{"type":1,"start":163,"end":168},{"type":1,"start":375,"end":381},{"type":2,"start":52,"end":67},{"type":2,"start":127,"end":133},{"type":2,"start":313,"end":321},{"type":2,"start":375,"end":381}]},{"name":"6c0b","type":8,"text":"const simulation = d3.forceSimulation()\n  .force('charge', d3.forceManyBody().strength(-20)) \n  .force('center', d3.forceCenter(width / 2, height / 2))","markups":[]},{"name":"3b80","type":1,"text":"To draw the circle and text elements (nodes), we will add two additional g elements and use the nodes-array as data source. In order to differentiate species from animals, we will use different colors for their respective circles.\nDespite to basic attributes such as r, fill or font-size, we also used dx and dy to relatively position the text elements to the right of the nodes.","markups":[{"type":2,"start":12,"end":18},{"type":2,"start":23,"end":27},{"type":2,"start":73,"end":75},{"type":2,"start":96,"end":101},{"type":2,"start":267,"end":268},{"type":2,"start":270,"end":274},{"type":2,"start":278,"end":287},{"type":2,"start":302,"end":304},{"type":2,"start":309,"end":311},{"type":2,"start":339,"end":343},{"type":2,"start":373,"end":378}]},{"name":"c265","type":8,"text":"function getNodeColor(node) {\n  return node.level === 1 ? 'red' : 'gray'\n}","markups":[]},{"name":"3371","type":8,"text":"const nodeElements = svg.append('g')\n  .selectAll('circle')\n  .data(nodes)\n  .enter().append('circle')\n    .attr('r', 10)\n    .attr('fill', getNodeColor)\n","markups":[]},{"name":"ebd9","type":8,"text":"const textElements = svg.append('g')\n  .selectAll('text')\n  .data(nodes)\n  .enter().append('text')\n    .text(node =\x3e node.label)\n    .attr('font-size', 15)\n    .attr('dx', 15)\n    .attr('dy', 4)","markups":[]},{"name":"06d0","type":1,"text":"Finally, we need to start the simulation and define a tick functions that is executed on every simulation tick. There, we will basically update the coordinates of both node and text elements.","markups":[{"type":1,"start":148,"end":159},{"type":2,"start":168,"end":172},{"type":2,"start":177,"end":181}]},{"name":"490a","type":8,"text":"simulation.nodes(nodes).on(‘tick’, () =\x3e {\n  nodeElements\n    .attr(“cx”, node =\x3e node.x)\n    .attr(“cy”, node =\x3e node.y)\n  textElements\n    .attr(“x”, node =\x3e node.x)\n    .attr(“y”, node =\x3e node.y)\n})","markups":[]},{"name":"a80d","type":14,"text":"Displaying Nodes\nRobin Frischmann's Block 8f88c54b78f16291bdcc5f2df406d6cebl.ocks.org","markups":[{"type":3,"start":0,"end":85,"href":"https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce","title":"https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce","rel":"","anchorType":0},{"type":1,"start":0,"end":16},{"type":2,"start":17,"end":74}],"mixtapeMetadata":{"mediaResourceId":"070ea4022b701d54932ce0174e04ce33","thumbnailImageId":"","href":"https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce"}},{"name":"d003","type":13,"text":"Relations","markups":[]},{"name":"3c74","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*Ch-pXyGYv-YnLdQ0XHwUaQ.png","originalWidth":1270,"originalHeight":678}},{"name":"fb23","type":1,"text":"With our basic data displayed, we now want to show all the relations (links) to understand the connections between the nodes. Links also create forces which either push nodes together or apart depending on the applied strength. This is the point where we make use of the above defined strength for each link: specie-animal relations will have stronger forces to group the nodes tighter together, while cross-relations will pull much softer.","markups":[]},{"name":"868e","type":1,"text":"We start by adding the link force to our simulation.","markups":[{"type":1,"start":23,"end":27},{"type":2,"start":23,"end":27}]},{"name":"de36","type":8,"text":"simulation.force('link', d3.forceLink()\n  .id(link =\x3e link.id)\n  .strength(link =\x3e link.strength))","markups":[]},{"name":"cd19","type":1,"text":"Then we can create the line elements to display our links respectively. This works basically the same as the circle and text elements as well.","markups":[{"type":2,"start":23,"end":27},{"type":2,"start":52,"end":57},{"type":2,"start":108,"end":115},{"type":2,"start":120,"end":124}]},{"name":"f15f","type":8,"text":"const linkElements = svg.append('g')\n  .selectAll('line')\n  .data(links)\n  .enter().append('line')\n    .attr('stroke-width', 1)\n    .attr('stroke', '#E5E5E5')","markups":[]},{"name":"15dd","type":1,"text":"In order to move the links on every tick, we add the following snippet to the tick-function.","markups":[{"type":2,"start":78,"end":82}]},{"name":"8144","type":8,"text":"linkElements\n .attr('x1', link =\x3e link.source.x)\n .attr('y1', link =\x3e link.source.y)\n .attr('x2', link =\x3e link.target.x)\n .attr('y2', link =\x3e link.target.y)","markups":[]},{"name":"5fc7","type":1,"text":"In a final step we need to apply all links to the link force.","markups":[{"type":1,"start":50,"end":54},{"type":2,"start":37,"end":42},{"type":2,"start":50,"end":54}]},{"name":"8bcd","type":8,"text":"simulation.force('link').link(links)","markups":[]},{"name":"e956","type":14,"text":"Relations\nRobin Frischmann's Block ef51753ff4ac2b7d6ebdb04ac182b5c7bl.ocks.org","markups":[{"type":3,"start":0,"end":78,"href":"https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7","title":"https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7","rel":"","anchorType":0},{"type":1,"start":0,"end":9},{"type":2,"start":10,"end":67}],"mixtapeMetadata":{"mediaResourceId":"aca3828656e1415ff440bd16fbca12b6","thumbnailImageId":"","href":"https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7"}},{"name":"4a36","type":13,"text":"User Interaction","markups":[]},{"name":"3363","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*ldD4TgMfpYkwlfM3Xxphig.png","originalWidth":1292,"originalHeight":688}},{"name":"7964","type":1,"text":"To be able to interact with the graph, we at least need drag & drop. Again, D3 already provides a nice API to add D&D without pain. This was basically copied from the example as well. The alphaTarget adjustments help us to create a more natural feeling and to rerun the simulation after the drop.","markups":[{"type":2,"start":188,"end":199}]},{"name":"25fe","type":1,"text":"Drag & Drop","markups":[{"type":1,"start":0,"end":11}]},{"name":"fef2","type":8,"text":"const dragDrop = d3.drag()\n  .on('start', node =\x3e {\n    node.fx = node.x\n    node.fy = node.y\n  })\n  .on('drag', node =\x3e {\n    simulation.alphaTarget(0.7).restart()\n    node.fx = d3.event.x\n    node.fy = d3.event.y\n  })\n  .on('end', node =\x3e {\n    if (!d3.event.active) {\n      simulation.alphaTarget(0)\n    }\n    node.fx = null\n    node.fy = null\n  })","markups":[]},{"name":"bf5c","type":1,"text":"To activate the dragDrop events, we only need to add it to the nodeElements.","markups":[{"type":2,"start":16,"end":24},{"type":2,"start":63,"end":75}]},{"name":"ef6c","type":8,"text":"nodeElements.call(dragDop)","markups":[]},{"name":"293c","type":1,"text":"Highlight Selection","markups":[{"type":1,"start":0,"end":19}]},{"name":"2f32","type":1,"text":"Additionally, we wanted to be able to select nodes in order to highlight their relations. To highlight the selection with all its connection we need to know two things.","markups":[]},{"name":"3032","type":10,"text":"Who are the direct neighbors of the clicked node?","markups":[]},{"name":"3316","type":10,"text":"Which links connect the clicked node with its neighbors?","markups":[]},{"name":"a1a7","type":1,"text":"This turns out to be very basic. We simply iterate all links and check if either the target or the source match the node’s id. If yes, we add the counterpart, which then obviously is a direct neighbor. e.g. If the target.id matches the node.id, we add the source.id to the neighbors-list. (see getNeighbors)","markups":[{"type":1,"start":123,"end":125},{"type":2,"start":85,"end":91},{"type":2,"start":99,"end":105},{"type":2,"start":116,"end":122},{"type":2,"start":202,"end":287},{"type":2,"start":294,"end":306}]},{"name":"2c78","type":1,"text":"To determine if a link connects the clicked node with one of its neighbors, we basically do the same. A link is a “connection-link” if either the target.id or the source.id match the node.id. (see isNeighborLink)","markups":[{"type":1,"start":135,"end":141},{"type":1,"start":156,"end":158},{"type":2,"start":145,"end":155},{"type":2,"start":163,"end":172},{"type":2,"start":183,"end":190},{"type":2,"start":197,"end":211}]},{"name":"303d","type":8,"text":"function getNeighbors(node) {\n  return links.reduce((neighbors, link) =\x3e {\n    if (link.target.id === node.id) {\n      neighbors.push(link.source.id)\n    } else if (link.source.id === node.id) {\n      neighbors.push(link.target.id)\n    }","markups":[]},{"name":"5d99","type":8,"text":"    return neighbors\n  }, [node.id])\n}","markups":[]},{"name":"22da","type":8,"text":"function isNeighborLink(node, link) {\n  return link.target.id === node.id || link.source.id === node.id\n}","markups":[]},{"name":"cffe","type":1,"text":"A simple way to visually highlight the nodes and links is by changing their colors. Therefore, we will use the below functions getTextColor, getLinkColor and getNodeColor (which replaces the previous getNodeColor).\nNow, all highlighted animal nodes will be colored green, all specie nodes blue. “connection-links” will be colored in green as well.","markups":[{"type":2,"start":127,"end":139},{"type":2,"start":141,"end":153},{"type":2,"start":158,"end":170},{"type":2,"start":200,"end":212}]},{"name":"b768","type":8,"text":"function getNodeColor(node, neighbors) {\n  if (neighbors.indexOf(node.id)) {\n    return node.level === 1 ? 'blue' : 'green'\n  }\n  return node.level === 1 ? 'red' : 'gray'\n}","markups":[]},{"name":"3d50","type":8,"text":"function getTextColor(node, neighbors) {\n  return neighbors.indexOf(node.id) ? 'green' : 'black'\n}","markups":[]},{"name":"560f","type":8,"text":"function getLinkColor(node, link) {\n  return isNeighborLink(node, link) ? 'green' : '#E5E5E5'\n}","markups":[]},{"name":"cf30","type":1,"text":"Bringing it all together, we have the following selectNode-function. It updates the colors of all nodes, texts and links depending on their “neighborhood-status”.","markups":[{"type":2,"start":48,"end":58}]},{"name":"8d0f","type":8,"text":"function selectNode(selectedNode) {\n  const neighbors = getNeighbors(selectedNode)","markups":[]},{"name":"b9f1","type":8,"text":"  nodeElements\n    .attr('fill', node =\x3e getNodeColor(node, neighbors)) \n  textElements\n    .attr('fill', node =\x3e getTextColor(node, neighbors))\n  linkElements\n    .attr('stroke', link =\x3e getLinkColor(selectedNode, link))\n}","markups":[]},{"name":"bf62","type":1,"text":"Last but not least, we need to add a click-event listener to every node element which calls selectNode.","markups":[{"type":1,"start":37,"end":57},{"type":2,"start":92,"end":102}]},{"name":"a923","type":8,"text":"nodeElements.on('click', selectNode)","markups":[]},{"name":"55e1","type":14,"text":"User Interaction\nRobin Frischmann's Block 74e3b61530c350d1ec1771416249a535bl.ocks.org","markups":[{"type":3,"start":0,"end":85,"href":"https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535","title":"https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535","rel":"","anchorType":0},{"type":1,"start":0,"end":16},{"type":2,"start":17,"end":74}],"mixtapeMetadata":{"mediaResourceId":"a9db983499f3c4269b56bc381663f90c","thumbnailImageId":"","href":"https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535"}},{"name":"e619","type":13,"text":"Dynamic Updates","markups":[]},{"name":"e195","type":4,"text":"","markups":[],"layout":1,"metadata":{"id":"1*p9k1GeQtwoaA3vr1p3h7OQ.png","originalWidth":1392,"originalHeight":614}},{"name":"7d3d","type":1,"text":"We already have a nice overview of our data, but that is still not enough. Often, data is not something static, but highly dynamic and frequently changes in the course of time. Therefore, we want the graph to update on every change.\nAlso, with growing data, the graph gets more and more overgrowded and thus confusing and won’t feel very user-friendly anymore. By hiding many sub-nodes to only show up when they’re effectively required (e.g. if they have connections to the currently selected node).","markups":[{"type":2,"start":436,"end":499}]},{"name":"6d6c","type":1,"text":"That’s why, for both cases, we need the ability to update the graph without a complete reload. Otherwise the simulation would restart and all efforts to ship a user-friendly application would ultimately be destroyed.","markups":[]},{"name":"a408","type":1,"text":"Luckily, D3 got us covered (again) with a great example on how to directly modify force-directed graphs. It uses the recommended update pattern, which can be described as: Mutate \x3e Replace.","markups":[{"type":1,"start":172,"end":189}]},{"name":"3166","type":1,"text":"Updating the Data","markups":[{"type":1,"start":0,"end":17}]},{"name":"95b0","type":1,"text":"First of all, we need to mutate our data. As we directly mutate the nodes and links, we use a copy with all nodes and links for reference. To actually mutate the nodes, we need to know which nodes get removed and which get added. We again use the neighbors to check which nodes to display. The species nodes should always be visible though.","markups":[{"type":2,"start":68,"end":73},{"type":2,"start":78,"end":83}]},{"name":"c918","type":1,"text":"Therefore we are generating a diff. Then, we simply use the diff to add and remove the affected nodes. The same method also applies to the links, although we do not need to mutate them, but can create a whole new array of links as well.","markups":[]},{"name":"447b","type":8,"text":"function updateData(selectedNode) {\n  const neighbors = getNeighbors(selectedNode)","markups":[]},{"name":"67b0","type":8,"text":"  const newNodes = baseNodes.filter(node =\x3e {\n    return neighbors.indexOf(node.id) \x3e -1 || node.level === 1\n  })","markups":[]},{"name":"db5a","type":8,"text":"  const diff = {\n    removed: nodes.filter(node =\x3e newNodes.indexOf(node) === -1),\n    added: newNodes.filter(node =\x3e nodes.indexOf(node) === -1)\n  }","markups":[]},{"name":"79ab","type":8,"text":"  diff.removed.forEach(node =\x3e nodes.splice(nodes.indexOf(node), 1))\n  diff.added.forEach(node =\x3e nodes.push(node))","markups":[]},{"name":"3353","type":8,"text":"  links = baseLinks.filter(link =\x3e {\n    return link.target.id === selectedNode.id || \n           link.source.id === selectedNode.id\n  })\n}","markups":[]},{"name":"546a","type":1,"text":"Updating the Nodes & Links","markups":[{"type":1,"start":0,"end":26}]},{"name":"f1ff","type":1,"text":"Now that we have both nodes and links up-to-date, we need to update the DOM elements to correctly display the new data. D3 will try to reuse existing nodes to only mutate the minimum set of elements. That the reason why we mutate the data rather than overwriting it.","markups":[{"type":1,"start":200,"end":266},{"type":2,"start":22,"end":27},{"type":2,"start":32,"end":37}]},{"name":"4d73","type":1,"text":"We need to modularize the element creation in order to react on updates. Using special svg groups helps us to better group the elements together:","markups":[]},{"name":"a96b","type":8,"text":"const linkGroup = svg.append(\"g\").attr(\"class\", \"links\")\nconst nodeGroup = svg.append(\"g\").attr(\"class\", \"nodes\")\nconst textGroup = svg.append(\"g\").attr(\"class\", \"texts\")","markups":[]},{"name":"9718","type":8,"text":"let linkElements, nodeElements, textElements","markups":[]},{"name":"5dab","type":1,"text":"Updating existing elements requires to remove old ones and then merge the new ones. Again, D3 has a pretty straightforward pattern to do so.","markups":[]},{"name":"fa31","type":8,"text":"linkElements = linkGroup.selectAll(\"line\").data(links, link =\x3e {\n  return link.target.id + link.source.id\n})","markups":[]},{"name":"d2c5","type":8,"text":"// 1. remove old nodes\nlinkElements.exit().remove()","markups":[]},{"name":"3e5e","type":8,"text":"// 2. enter and create new ones\nconst linkEnter = linkElements\n  .enter().append(\"line\")\n  .attr(\"stroke-width\", 1)\n  .attr(\"stroke\", \"rgba(50, 50, 50, 0.2)\")","markups":[]},{"name":"fa74","type":8,"text":"// 3. merge\nlinkElements = linkEnter.merge(linkElements)","markups":[]},{"name":"8fc9","type":1,"text":"We will repeat the exact same pattern for both nodes and texts as well and wrap the snippets inside the so-called updateGraph-method to later reuse it.","markups":[{"type":2,"start":114,"end":125}]},{"name":"0af6","type":1,"text":"Updating the Simulation","markups":[{"type":1,"start":0,"end":23}]},{"name":"de80","type":1,"text":"Last but not least, we need to update the simulation to apply the above changes. The following function will update the graph using the above updateGraph-method. Afterwards it reinitialises the simulation with the new nodes and links and then restart it.","markups":[{"type":2,"start":142,"end":153}]},{"name":"a708","type":8,"text":"function updateSimulation() {\n  updateGraph()","markups":[]},{"name":"1fa0","type":8,"text":"  simulation.nodes.on(\"tick\", /* see above */)\n  simulation.force(\"links\")","markups":[]},{"name":"915c","type":8,"text":"  simulation.restart()\n}","markups":[]},{"name":"91a8","type":1,"text":"To dynamically update the graph depending on the users interaction, we can embed the updateData and updateSimulation-methods into the selectNode-method that is called on every node.","markups":[{"type":2,"start":85,"end":95},{"type":2,"start":100,"end":116},{"type":2,"start":134,"end":144}]},{"name":"39b8","type":14,"text":"Dynamic Updates\nRobin Frischmann's Block 0de01de85296591eb45a1dde2040c5a1bl.ocks.org","markups":[{"type":3,"start":0,"end":84,"href":"https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1","title":"https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1","rel":"","anchorType":0},{"type":1,"start":0,"end":15},{"type":2,"start":16,"end":73}],"mixtapeMetadata":{"mediaResourceId":"e5a92e40dd32371d645581b3b31341df","thumbnailImageId":"","href":"https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1"}},{"name":"6e24","type":13,"text":"Styling & Visual Design","markups":[]},{"name":"e5b2","type":1,"text":"Now that we have all the logic ready to ship a highly dynamic and interactive graph, we can make it look awesome with basic styling techniques. I will not go into detail here, but just check out the preview at the begining of this posts, to see what’s possible without any further tooling and skill.","markups":[]},{"name":"e07f","type":6,"text":"PS: Some convenient code snippets might have been dropped to keep this post as small and informative as possible. Especially talking about the “Dynamic Updates” part, please refer to the code examples for further information. They also include useful code comments to get along.","markups":[{"type":1,"start":0,"end":2}]},{"name":"3df8","type":3,"text":"Demo","markups":[]},{"name":"aca6","type":1,"text":"All code examples are hosted on GitHub. We provide ready-to-run examples wrapped inside a .html file directly. Also, there is a code-folder that contains the complete code in modular ES2015 syntax. Check it out: https://github.com/ninjaconcept/d3-force-directed-graph","markups":[{"type":3,"start":51,"end":72,"href":"https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/example","title":"","rel":"","anchorType":0},{"type":3,"start":128,"end":139,"href":"https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/code","title":"","rel":"","anchorType":0},{"type":3,"start":212,"end":267,"href":"https://github.com/ninjaconcept/d3-force-directed-graph","title":"","rel":"nofollow","anchorType":0},{"type":2,"start":90,"end":95}]},{"name":"bfdf","type":3,"text":"Conclusion","markups":[]},{"name":"35e5","type":1,"text":"To keep it short: Working with D3 is a pleasure. \nWe had a lot of fun experimenting with the force simulation API the result is yet quite impressive.","markups":[{"type":1,"start":18,"end":50},{"type":2,"start":0,"end":17}]},{"name":"15ed","type":1,"text":"At NinjaConcept, we will definitely use it again soon!","markups":[{"type":3,"start":3,"end":15,"href":"https://www.ninjaconcept.com","title":"","rel":"","anchorType":0}]}],"sections":[{"name":"47eb","startIndex":0},{"name":"1619","startIndex":26}]},"postDisplay":{"coverless":true},"metaDescription":"Many companies have a tremendous amount of data which is not just hard to maintain and manage, but also hard to understand and analyse. Here, data visualisation should find a remedy. The main goal is…"},"virtuals":{"statusForCollection":"APPROVED","allowNotes":true,"previewImage":{"imageId":"1*6RDl7zNmvg_4QSHVRrmYCw.png","filter":"","backgroundSize":"","originalWidth":2453,"originalHeight":1053,"strategy":"resample","height":0,"width":0},"wordCount":2711,"imageCount":5,"readingTime":11.063522012578616,"subtitle":"A guided tour through D3 4.0 force simulations","userPostRelation":{"userId":"4b3a2a9faadc","postId":"da720c6d7811","readAt":1553293716422,"readLaterAddedAt":1553293720007,"votedAt":0,"collaboratorAddedAt":0,"notesAddedAt":0,"subscribedAt":0,"lastReadSectionName":"1619","lastReadVersionId":"ee745a69447","lastReadAt":1553293742038,"lastReadParagraphName":"55e1","lastReadPercentage":0.72,"viewedAt":1553293710302,"presentedCountInResponseManagement":0,"clapCount":0,"seriesUpdateNotifsOptedInAt":0,"queuedAt":1553293720007,"seriesFirstViewedAt":0,"presentedCountInStream":1,"seriesLastViewedAt":0,"audioProgressSec":0},"publishedInCount":1,"usersBySocialRecommends":[],"noIndex":false,"recommends":115,"socialRecommends":[],"isBookmarked":true,"tags":[{"slug":"d3","name":"D3","postCount":168,"metadata":{"postCount":168,"coverImage":{"id":"0*GpIqHj7NJh9ixD9G","originalWidth":1038,"originalHeight":576}},"type":"Tag"},{"slug":"javascript","name":"JavaScript","postCount":89879,"metadata":{"postCount":89879,"coverImage":{"id":"1*xiJRjtRIJoosH5sI_fMdgQ.jpeg","originalWidth":5434,"originalHeight":3623,"isFeatured":true}},"type":"Tag"},{"slug":"web-development","name":"Web Development","postCount":90120,"metadata":{"postCount":90120,"coverImage":{"id":"1*fyXNSvbsWjSDxBxJp6sXIA.jpeg","originalWidth":5198,"originalHeight":3465,"isFeatured":true}},"type":"Tag"},{"slug":"software-development","name":"Software Development","postCount":57674,"metadata":{"postCount":57674,"coverImage":{"id":"1*VkiJ-8KRFEniN_2CUcL-dA.png","originalWidth":3454,"originalHeight":2840,"isFeatured":true,"focusPercentX":53,"focusPercentY":65}},"type":"Tag"},{"slug":"data-visualization","name":"Data Visualization","postCount":13511,"metadata":{"postCount":13511,"coverImage":{"id":"1*ZEoOGCkFaCA7L0Uv1P2xjg.gif","originalWidth":1015,"originalHeight":663,"isFeatured":true}},"type":"Tag"}],"socialRecommendsCount":0,"responsesCreatedCount":4,"links":{"entries":[{"url":"https://bost.ocks.org/mike/","alts":[],"httpStatus":200},{"url":"https://bl.ocks.org/rofrischmann/74e3b61530c350d1ec1771416249a535","alts":[],"httpStatus":200},{"url":"https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/code","alts":[],"httpStatus":200},{"url":"https://github.com/ninjaconcept/d3-force-directed-graph","alts":[],"httpStatus":200},{"url":"https://www.ninjaconcept.com","alts":[],"httpStatus":200},{"url":"https://bl.ocks.org/rofrischmann/ef51753ff4ac2b7d6ebdb04ac182b5c7","alts":[],"httpStatus":200},{"url":"https://bl.ocks.org/rofrischmann/8f88c54b78f16291bdcc5f2df406d6ce","alts":[],"httpStatus":200},{"url":"https://github.com/d3/d3-force#simulation","alts":[],"httpStatus":200},{"url":"https://bl.ocks.org/rofrischmann/0de01de85296591eb45a1dde2040c5a1","alts":[],"httpStatus":200},{"url":"https://github.com/d3/d3-force","alts":[],"httpStatus":200},{"url":"https://github.com/ninjaconcept/d3-force-directed-graph/tree/master/example","alts":[],"httpStatus":200},{"url":"https://bl.ocks.org/mbostock/4062045","alts":[],"httpStatus":200},{"url":"https://www.microsoft.com/microsoft-surface-hub/","alts":[],"httpStatus":200}],"version":"0.3","generatedAt":1537177529987},"isLockedPreviewOnly":false,"takeoverId":"","metaDescription":"Many companies have a tremendous amount of data which is not just hard to maintain and manage, but also hard to understand and analyse. Here, data visualisation should find a remedy. The main goal is…","totalClapCount":536,"sectionCount":2,"readingList":1,"topics":[]},"coverless":true,"slug":"interactive-dynamic-force-directed-graphs-with-d3","translationSourcePostId":"","translationSourceCreatorId":"","isApprovedTranslation":false,"inResponseToPostId":"","inResponseToRemovedAt":0,"isTitleSynthesized":false,"allowResponses":true,"importedUrl":"","importedPublishedAt":0,"visibility":0,"uniqueSlug":"interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811","previewContent":{"bodyModel":{"paragraphs":[{"name":"previewImage","type":4,"text":"","layout":10,"metadata":{"id":"1*6RDl7zNmvg_4QSHVRrmYCw.png","originalWidth":2453,"originalHeight":1053}},{"name":"previewTitle","type":3,"text":"Interactive & Dynamic Force-Directed Graphs with D3","alignment":1},{"name":"previewSubtitle","type":13,"text":"A guided tour through D3 4.0 force simulations","alignment":1}],"sections":[{"startIndex":0}]},"isFullContent":false,"subtitle":"A guided tour through D3 4.0 force simulations"},"license":0,"inResponseToMediaResourceId":"","canonicalUrl":"https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811","approvedHomeCollectionId":"78a40cd88307","approvedHomeCollection":{"id":"78a40cd88307","name":"NinjaConcept","slug":"ninjaconcept","tags":["WEB DEVELOPMENT","SOFTWARE DESIGN","USER EXPERIENCE DESIGN","BACKEND DEVELOPMENT","FUNCTIONAL PROGRAMMING"],"creatorId":"1f4a8917ae9d","description":"Hi! We’re NinjaConcept, a web consultancy with leading-edge development skills and a passion for outstanding user experience design.","shortDescription":"Hi!","image":{"imageId":"1*LTxus9k21IEslDwdPeFRRA.png","filter":"","backgroundSize":"","originalWidth":649,"originalHeight":649,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":65,"activeAt":1489656964116},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*Kde-D1MU1QETeIfHU602aw.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":200,"strategy":"resample","height":0,"width":0},"twitterUsername":"ninjaconcept","facebookPageName":"NinjaConcept","publicEmail":"contact@ninjaconcept.com","sections":[{"type":2,"collectionHeaderMetadata":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}}],"tintColor":"#FF16181C","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF83848A","point":0},{"color":"#FF7A7B80","point":0.1},{"color":"#FF717276","point":0.2},{"color":"#FF67686C","point":0.3},{"color":"#FF5D5E61","point":0.4},{"color":"#FF535457","point":0.5},{"color":"#FF494A4C","point":0.6},{"color":"#FF3E3F40","point":0.7},{"color":"#FF333335","point":0.8},{"color":"#FF272728","point":0.9},{"color":"#FF1A1A1B","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF16181C","point":0},{"color":"#FF35373B","point":0.1},{"color":"#FF505155","point":0.2},{"color":"#FF696A6D","point":0.3},{"color":"#FF808084","point":0.4},{"color":"#FF969699","point":0.5},{"color":"#FFACABAE","point":0.6},{"color":"#FFC0BFC2","point":0.7},{"color":"#FFD4D3D5","point":0.8},{"color":"#FFE8E6E8","point":0.9},{"color":"#FFFBF9FA","point":1}],"backgroundColor":"#FF16181C"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF4F2F3","point":0},{"color":"#FFF2F0F1","point":0.1},{"color":"#FFF0EEF0","point":0.2},{"color":"#FFEEECEE","point":0.3},{"color":"#FFECEAED","point":0.4},{"color":"#FFEAE9EB","point":0.5},{"color":"#FFE7E7EA","point":0.6},{"color":"#FFE5E5E8","point":0.7},{"color":"#FFE3E3E7","point":0.8},{"color":"#FFE1E1E5","point":0.9},{"color":"#FFDFDFE4","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Development","tagSlug":"software-development","url":"https://medium.com/ninjaconcept/tagged/software-development","source":"tagSlug"},{"type":1,"title":"Design","tagSlug":"user-experience-design","url":"https://medium.com/ninjaconcept/tagged/user-experience-design","source":"tagSlug"},{"type":6,"title":"About","url":"https://medium.com/ninjaconcept/about"},{"type":3,"title":"Website","url":"https://www.ninjaconcept.com"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4},"type":"Collection"},"newsletterId":"","webCanonicalUrl":"https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811","mediumUrl":"https://medium.com/ninjaconcept/interactive-dynamic-force-directed-graphs-with-d3-da720c6d7811","migrationId":"","notifyFollowers":true,"notifyTwitter":false,"notifyFacebook":false,"responseHiddenOnParentPostAt":0,"isSeries":false,"isSubscriptionLocked":false,"seriesLastAppendedAt":0,"audioVersionDurationSec":0,"sequenceId":"","isNsfw":false,"isEligibleForRevenue":false,"isBlockedFromHightower":false,"deletedAt":0,"lockedPostSource":0,"hightowerMinimumGuaranteeStartsAt":0,"hightowerMinimumGuaranteeEndsAt":0,"featureLockRequestAcceptedAt":0,"mongerRequestType":1,"layerCake":0,"socialTitle":"","socialDek":"","editorialPreviewTitle":"","editorialPreviewDek":"","curationEligibleAt":0,"type":"Post"},"mentionedUsers":[],"collaborators":[],"collectionUserRelations":[],"mode":null,"references":{"User":{"1f4a8917ae9d":{"userId":"1f4a8917ae9d","name":"Robin Frischmann","username":"rofrischmann","createdAt":1434653103908,"imageId":"1*kHyejmD-gSHBGZZ0OM-2Hw.jpeg","backgroundImageId":"1*ywQ7QMQtkTguUHnmTYrJ5Q.jpeg","bio":"Frontend Architect. Freelancer. Creating Fela. Studying Psychology & CS. Musician. Runner. All about Functional UI. CSS (in JS), JavaScript, ReasonML.","twitterScreenName":"rofrischmann","socialStats":{"userId":"1f4a8917ae9d","usersFollowedCount":86,"usersFollowedByCount":219,"type":"SocialStats"},"social":{"userId":"4b3a2a9faadc","targetUserId":"1f4a8917ae9d","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"},"facebookAccountId":"1712356718775854","allowNotes":1,"mediumMemberAt":0,"isNsfw":false,"isWriterProgramEnrolled":true,"isQuarantined":false,"type":"User"}},"Collection":{"78a40cd88307":{"id":"78a40cd88307","name":"NinjaConcept","slug":"ninjaconcept","tags":["WEB DEVELOPMENT","SOFTWARE DESIGN","USER EXPERIENCE DESIGN","BACKEND DEVELOPMENT","FUNCTIONAL PROGRAMMING"],"creatorId":"1f4a8917ae9d","description":"Hi! We’re NinjaConcept, a web consultancy with leading-edge development skills and a passion for outstanding user experience design.","shortDescription":"Hi!","image":{"imageId":"1*LTxus9k21IEslDwdPeFRRA.png","filter":"","backgroundSize":"","originalWidth":649,"originalHeight":649,"strategy":"resample","height":0,"width":0},"metadata":{"followerCount":65,"activeAt":1489656964116},"virtuals":{"permissions":{"canPublish":false,"canPublishAll":false,"canRepublish":false,"canRemove":false,"canManageAll":false,"canSubmit":false,"canEditPosts":false,"canAddWriters":false,"canViewStats":false,"canSendNewsletter":false,"canViewLockedPosts":false,"canViewCloaked":false,"canEditOwnPosts":false,"canBeAssignedAuthor":false,"canEnrollInHightower":false,"canLockPostsForMediumMembers":false,"canLockOwnPostsForMediumMembers":false},"isSubscribed":false,"isNewsletterSubscribed":false,"memberOfMembershipPlanId":"","isEnrolledInHightower":false,"isEligibleForHightower":false},"logo":{"imageId":"1*Kde-D1MU1QETeIfHU602aw.png","filter":"","backgroundSize":"","originalWidth":600,"originalHeight":200,"strategy":"resample","height":0,"width":0},"twitterUsername":"ninjaconcept","facebookPageName":"NinjaConcept","publicEmail":"contact@ninjaconcept.com","sections":[{"type":2,"collectionHeaderMetadata":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4}},{"type":1,"postListMetadata":{"source":1,"layout":4,"number":7,"postIds":[]}}],"tintColor":"#FF16181C","lightText":true,"favicon":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"colorPalette":{"defaultBackgroundSpectrum":{"colorPoints":[{"color":"#FF83848A","point":0},{"color":"#FF7A7B80","point":0.1},{"color":"#FF717276","point":0.2},{"color":"#FF67686C","point":0.3},{"color":"#FF5D5E61","point":0.4},{"color":"#FF535457","point":0.5},{"color":"#FF494A4C","point":0.6},{"color":"#FF3E3F40","point":0.7},{"color":"#FF333335","point":0.8},{"color":"#FF272728","point":0.9},{"color":"#FF1A1A1B","point":1}],"backgroundColor":"#FFFFFFFF"},"tintBackgroundSpectrum":{"colorPoints":[{"color":"#FF16181C","point":0},{"color":"#FF35373B","point":0.1},{"color":"#FF505155","point":0.2},{"color":"#FF696A6D","point":0.3},{"color":"#FF808084","point":0.4},{"color":"#FF969699","point":0.5},{"color":"#FFACABAE","point":0.6},{"color":"#FFC0BFC2","point":0.7},{"color":"#FFD4D3D5","point":0.8},{"color":"#FFE8E6E8","point":0.9},{"color":"#FFFBF9FA","point":1}],"backgroundColor":"#FF16181C"},"highlightSpectrum":{"colorPoints":[{"color":"#FFF4F2F3","point":0},{"color":"#FFF2F0F1","point":0.1},{"color":"#FFF0EEF0","point":0.2},{"color":"#FFEEECEE","point":0.3},{"color":"#FFECEAED","point":0.4},{"color":"#FFEAE9EB","point":0.5},{"color":"#FFE7E7EA","point":0.6},{"color":"#FFE5E5E8","point":0.7},{"color":"#FFE3E3E7","point":0.8},{"color":"#FFE1E1E5","point":0.9},{"color":"#FFDFDFE4","point":1}],"backgroundColor":"#FFFFFFFF"}},"navItems":[{"type":1,"title":"Development","tagSlug":"software-development","url":"https://medium.com/ninjaconcept/tagged/software-development","source":"tagSlug"},{"type":1,"title":"Design","tagSlug":"user-experience-design","url":"https://medium.com/ninjaconcept/tagged/user-experience-design","source":"tagSlug"},{"type":6,"title":"About","url":"https://medium.com/ninjaconcept/about"},{"type":3,"title":"Website","url":"https://www.ninjaconcept.com"}],"colorBehavior":2,"instantArticlesState":0,"acceleratedMobilePagesState":0,"ampLogo":{"imageId":"","filter":"","backgroundSize":"","originalWidth":0,"originalHeight":0,"strategy":"resample","height":0,"width":0},"header":{"backgroundImage":{},"logoImage":{"id":"1*Kde-D1MU1QETeIfHU602aw@2x.png","originalWidth":600,"originalHeight":200,"alt":"NinjaConcept"},"alignment":2,"layout":4},"type":"Collection"}},"Social":{"1f4a8917ae9d":{"userId":"4b3a2a9faadc","targetUserId":"1f4a8917ae9d","isFollowing":true,"isTwitterFollowing":false,"isFacebookFollowing":false,"isMediumFollowing":true,"type":"Social"}},"SocialStats":{"1f4a8917ae9d":{"userId":"1f4a8917ae9d","usersFollowedCount":86,"usersFollowedByCount":219,"type":"SocialStats"}}}})
// ]]></script><script id="parsely-cfg" src="//d1z2jf7jlzjs58.cloudfront.net/keys/medium.com/p.js"></script><script type="text/javascript">(function(b,r,a,n,c,h,_,s,d,k){if(!b[n]||!b[n]._q){for(;s<_.length;)c(h,_[s++]);d=r.createElement(a);d.async=1;d.src="https://cdn.branch.io/branch-latest.min.js";k=r.getElementsByTagName(a)[0];k.parentNode.insertBefore(d,k);b[n]=h}})(window,document,"script","branch",function(b,r){b[r]=function(){b._q.push([r,arguments])}},{_q:[],_v:1},"addListener applyCode autoAppIndex banner closeBanner closeJourney creditHistory credits data deepview deepviewCta first getCode init link logout redeem referrals removeListener sendSMS setBranchViewData setIdentity track validateCode trackCommerceEvent logEvent".split(" "), 0); branch.init('key_live_ofxXr2qTrrU9NqURK8ZwEhknBxiI6KBm', {'no_journeys': true, 'disable_exit_animation': true, 'disable_entry_animation': true, 'tracking_disabled':  false }, function(err, data) {});</script></body></html>